<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Titanic - studies on classification | Data Science and Tidymodels</title>
  <meta name="description" content="Chapter 3 Titanic - studies on classification | Data Science and Tidymodels" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Titanic - studies on classification | Data Science and Tidymodels" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://dswtmsc.netlify.app/index.html" />
  
  
  <meta name="github-repo" content="https://github.com/Bjarnelp/Data_Science_Tidymodels" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Titanic - studies on classification | Data Science and Tidymodels" />
  
  
  

<meta name="author" content="Bjarne Lund Pedersen" />


<meta name="date" content="2022-02-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="machine-learning-capstone-project.html"/>
<link rel="next" href="ames-housing-data---regression-methods.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science and Tidymodels</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> cover-image: path to the social sharing image like images/cover.jpg</a></li>
<li class="chapter" data-level="2" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html"><i class="fa fa-check"></i><b>2</b> Machine Learning Capstone Project</a>
<ul>
<li class="chapter" data-level="2.1" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#data-collection"><i class="fa fa-check"></i><b>2.1</b> Data Collection</a></li>
<li class="chapter" data-level="2.2" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#data-wrangling"><i class="fa fa-check"></i><b>2.2</b> Data Wrangling</a></li>
<li class="chapter" data-level="2.3" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#eda-with-visualizations"><i class="fa fa-check"></i><b>2.3</b> EDA with Visualizations</a></li>
<li class="chapter" data-level="2.4" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#interactive-visual-analytics"><i class="fa fa-check"></i><b>2.4</b> Interactive Visual Analytics</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#map-data-with-leaflet"><i class="fa fa-check"></i><b>2.4.1</b> Map data with Leaflet</a></li>
<li class="chapter" data-level="2.4.2" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#dashboard-for-further-visual-eda"><i class="fa fa-check"></i><b>2.4.2</b> Dashboard for further visual EDA</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#machine-learning-models"><i class="fa fa-check"></i><b>2.5</b> Machine Learning Models</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#logistic-regression"><i class="fa fa-check"></i><b>2.5.1</b> Logistic regression</a></li>
<li class="chapter" data-level="2.5.2" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#support-vector-machines-svm"><i class="fa fa-check"></i><b>2.5.2</b> Support Vector Machines (SVM)</a></li>
<li class="chapter" data-level="2.5.3" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#knn-classifier"><i class="fa fa-check"></i><b>2.5.3</b> kNN classifier</a></li>
<li class="chapter" data-level="2.5.4" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#decision-tree-classifier"><i class="fa fa-check"></i><b>2.5.4</b> Decision tree classifier</a></li>
<li class="chapter" data-level="2.5.5" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#outro"><i class="fa fa-check"></i><b>2.5.5</b> Outro</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="titanic---studies-on-classification.html"><a href="titanic---studies-on-classification.html"><i class="fa fa-check"></i><b>3</b> Titanic - studies on classification</a>
<ul>
<li class="chapter" data-level="3.1" data-path="titanic---studies-on-classification.html"><a href="titanic---studies-on-classification.html#data-collection-and-cleaning"><i class="fa fa-check"></i><b>3.1</b> Data collection and cleaning</a></li>
<li class="chapter" data-level="3.2" data-path="titanic---studies-on-classification.html"><a href="titanic---studies-on-classification.html#eda"><i class="fa fa-check"></i><b>3.2</b> EDA</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ames-housing-data---regression-methods.html"><a href="ames-housing-data---regression-methods.html"><i class="fa fa-check"></i><b>4</b> Ames Housing Data - regression methods</a></li>
<li class="chapter" data-level="5" data-path="store-sales---time-series-prediction.html"><a href="store-sales---time-series-prediction.html"><i class="fa fa-check"></i><b>5</b> Store Sales - Time Series Prediction</a></li>
<li class="chapter" data-level="6" data-path="petals-to-the-metal---image-classification-using-tensorflow.html"><a href="petals-to-the-metal---image-classification-using-tensorflow.html"><i class="fa fa-check"></i><b>6</b> Petals to the Metal - Image Classification using tensorflow</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science and Tidymodels</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="titanic---studies-on-classification" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Titanic - studies on classification</h1>
<p>In this chapter we will turn our focus til classification techniques. The data set used will be the Kaggle data set <em>Titanic</em>.</p>
<p>The first section will focus on data collection and data wrangling. The second section has its focus on EDA. In the third and last section we will study the following classification models and how to optimize them for the dataset: Logistic Regression, LDA, kNN, SVM, XGBoost and lightGBM.</p>
<p>The evaluation metric will be the Kaggle score for each model.</p>
<div id="data-collection-and-cleaning" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Data collection and cleaning</h2>
<p>The data was downloaded from Kaggle.com. The data set is made up of two parts. Part 1 is a training set for supervised learning. Part 2 is a test set, where the outcome column has been removed.</p>
<p>We will begin by loading the two data files and have a look at the data types of each column:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="titanic---studies-on-classification.html#cb1-1" aria-hidden="true" tabindex="-1"></a>titanic_train <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;./titanic_train.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 891 Columns: 12
## ── Column specification ────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (5): Name, Sex, Ticket, Cabin, Embarked
## dbl (7): PassengerId, Survived, Pclass, Age, SibSp, Parch, Fare
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="titanic---studies-on-classification.html#cb3-1" aria-hidden="true" tabindex="-1"></a>titanic_test <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;./titanic_test.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 418 Columns: 11
## ── Column specification ────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (5): Name, Sex, Ticket, Cabin, Embarked
## dbl (6): PassengerId, Pclass, Age, SibSp, Parch, Fare
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>We see that the training data is comprised of 891 observation of 12 features, whereas the test data is comprised of 418 observations of 11 features.</p>
<p>We have 5 features coded as charaters: Name, Sex, Ticket, Cabin, Embarked.</p>
<p>We have 6 numeric features: PassengerId, Pclass, Age, SibSp. Parch, Fare.</p>
<p>Let us first see if we need to deal with missing values:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="titanic---studies-on-classification.html#cb5-1" aria-hidden="true" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="titanic---studies-on-classification.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">which</span>(<span class="fu">colSums</span>(<span class="fu">is.na</span>(.))<span class="sc">&gt;</span><span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="titanic---studies-on-classification.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(<span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##     Age Cabin Embarked
##   &lt;int&gt; &lt;int&gt;    &lt;int&gt;
## 1   177   687        2</code></pre>
<p>We see that most of the cabin data is missing. We will not deal with these for now, but drop the column, when doing the actual modelling later.</p>
<p>For embarked we will replace the missing values with the mode. We start by determining the mode:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="titanic---studies-on-classification.html#cb7-1" aria-hidden="true" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Embarked) <span class="sc">%&gt;%</span> <span class="fu">count</span>() <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
## # Groups:   Embarked [4]
##   Embarked     n
##   &lt;chr&gt;    &lt;int&gt;
## 1 S          644
## 2 C          168
## 3 Q           77
## 4 &lt;NA&gt;         2</code></pre>
<p>Then we replace the NAs by “S”:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="titanic---studies-on-classification.html#cb9-1" aria-hidden="true" tabindex="-1"></a>titanic_train <span class="ot">&lt;-</span> titanic_train <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Embarked =</span> <span class="fu">replace</span>(Embarked,<span class="fu">is.na</span>(Embarked),<span class="st">&quot;S&quot;</span>))</span></code></pre></div>
<p>Next, let’s have a look at the distribution of age:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="titanic---studies-on-classification.html#cb10-1" aria-hidden="true" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span> <span class="fu">count</span>(<span class="at">Age_interval =</span> <span class="fu">cut_interval</span>(Age,<span class="at">n=</span><span class="dv">6</span>))</span></code></pre></div>
<pre><code>## # A tibble: 7 × 2
##   Age_interval     n
##   &lt;fct&gt;        &lt;int&gt;
## 1 [0.42,13.7]     71
## 2 (13.7,26.9]    248
## 3 (26.9,40.2]    245
## 4 (40.2,53.5]    100
## 5 (53.5,66.7]     43
## 6 (66.7,80]        7
## 7 &lt;NA&gt;           177</code></pre>
<p>We get see that Age seems right skewed. To verify this we calculate the skewness using the {moments} package:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="titanic---studies-on-classification.html#cb12-1" aria-hidden="true" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span> <span class="fu">select</span>(Age) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(.)) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Skewness =</span> moments<span class="sc">::</span><span class="fu">skewness</span>(.))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   Skewness
##      &lt;dbl&gt;
## 1    0.388</code></pre>
<p>With the right skewed age data we choose to impute the missing values in Age column with the median.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="titanic---studies-on-classification.html#cb14-1" aria-hidden="true" tabindex="-1"></a>titanic_train <span class="ot">&lt;-</span> titanic_train <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Age =</span> <span class="fu">replace</span>(Age,<span class="fu">is.na</span>(Age),<span class="fu">median</span>(Age,<span class="at">na.rm=</span><span class="cn">TRUE</span>)))</span></code></pre></div>
<p>With this we conclude the data collection and preparation process and move on to the EDA.</p>
</div>
<div id="eda" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> EDA</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="machine-learning-capstone-project.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ames-housing-data---regression-methods.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
