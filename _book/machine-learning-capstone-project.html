<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Machine Learning Capstone Project | Data Science and Tidymodels</title>
  <meta name="description" content="Chapter 2 Machine Learning Capstone Project | Data Science and Tidymodels" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Machine Learning Capstone Project | Data Science and Tidymodels" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Machine Learning Capstone Project | Data Science and Tidymodels" />
  
  
  

<meta name="author" content="Bjarne Lund Pedersen" />


<meta name="date" content="2022-02-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="titanic---studies-on-classification.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.0/leaflet.js"></script>
<link href="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet" />
<script src="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>
<link href="libs/ionicons-2.0.1/ionicons.min.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science and Tidymodels</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html"><i class="fa fa-check"></i><b>2</b> Machine Learning Capstone Project</a>
<ul>
<li class="chapter" data-level="2.1" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#data-collection"><i class="fa fa-check"></i><b>2.1</b> Data Collection</a></li>
<li class="chapter" data-level="2.2" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#data-wrangling"><i class="fa fa-check"></i><b>2.2</b> Data Wrangling</a></li>
<li class="chapter" data-level="2.3" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#eda-with-visualizations"><i class="fa fa-check"></i><b>2.3</b> EDA with Visualizations</a></li>
<li class="chapter" data-level="2.4" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#interactive-visual-analytics"><i class="fa fa-check"></i><b>2.4</b> Interactive Visual Analytics</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#map-data-with-leaflet"><i class="fa fa-check"></i><b>2.4.1</b> Map data with Leaflet</a></li>
<li class="chapter" data-level="2.4.2" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#dashboard-for-further-visual-eda"><i class="fa fa-check"></i><b>2.4.2</b> Dashboard for further visual EDA</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#machine-learning-models"><i class="fa fa-check"></i><b>2.5</b> Machine Learning Models</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#logistic-regression"><i class="fa fa-check"></i><b>2.5.1</b> Logistic regression</a></li>
<li class="chapter" data-level="2.5.2" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#support-vector-machines-svm"><i class="fa fa-check"></i><b>2.5.2</b> Support Vector Machines (SVM)</a></li>
<li class="chapter" data-level="2.5.3" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#knn-classifier"><i class="fa fa-check"></i><b>2.5.3</b> kNN classifier</a></li>
<li class="chapter" data-level="2.5.4" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#decision-tree-classifier"><i class="fa fa-check"></i><b>2.5.4</b> Decision tree classifier</a></li>
<li class="chapter" data-level="2.5.5" data-path="machine-learning-capstone-project.html"><a href="machine-learning-capstone-project.html#outro"><i class="fa fa-check"></i><b>2.5.5</b> Outro</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="titanic---studies-on-classification.html"><a href="titanic---studies-on-classification.html"><i class="fa fa-check"></i><b>3</b> Titanic - studies on classification</a></li>
<li class="chapter" data-level="4" data-path="ames-housing-data---regression-methods.html"><a href="ames-housing-data---regression-methods.html"><i class="fa fa-check"></i><b>4</b> Ames Housing Data - regression methods</a></li>
<li class="chapter" data-level="5" data-path="store-sales---time-series-prediction.html"><a href="store-sales---time-series-prediction.html"><i class="fa fa-check"></i><b>5</b> Store Sales - Time Series Prediction</a></li>
<li class="chapter" data-level="6" data-path="petals-to-the-metal---image-classification-using-tensorflow.html"><a href="petals-to-the-metal---image-classification-using-tensorflow.html"><i class="fa fa-check"></i><b>6</b> Petals to the Metal - Image Classification using tensorflow</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science and Tidymodels</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="machine-learning-capstone-project" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Machine Learning Capstone Project</h1>
<p>In this chapter we will have a look at the SpaceX dataset, which is used
for the final capstone project in IBM Python Data Science Professional Certificate. Originally
the project is Python based, but my aim is to do the exact things in R using the Tidyverse dialect.</p>
<p>The project contains the following parts:</p>
<p>Data , Data Wrangling, Data Visualizations, Interactive Maps using Leaflet, R Shiny app and Machine Learning models.</p>
<div id="data-collection" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Data Collection</h2>
<p>In this chapter we will collect the data for the SpaceX project using an API. First
we will connect to an URL to retrieve the data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="machine-learning-capstone-project.html#cb1-1" aria-hidden="true" tabindex="-1"></a>spacex_url<span class="ot">=</span><span class="st">&#39;https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DS0321EN-SkillsNetwork/datasets/API_call_spacex_api.json&#39;</span></span>
<span id="cb1-2"><a href="machine-learning-capstone-project.html#cb1-2" aria-hidden="true" tabindex="-1"></a>response <span class="ot">=</span> httr<span class="sc">::</span><span class="fu">GET</span>(spacex_url)</span>
<span id="cb1-3"><a href="machine-learning-capstone-project.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(response<span class="sc">$</span>status_code)</span></code></pre></div>
<pre><code>## [1] 200</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="machine-learning-capstone-project.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(response)</span></code></pre></div>
<pre><code>## Response [https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DS0321EN-SkillsNetwork/datasets/API_call_spacex_api.json]
##   Date: 2022-02-17 12:46
##   Status: 200
##   Content-Type: application/json
##   Size: 270 kB</code></pre>
<p>With status code 200 the connection was successful. Let us retrieve the JSON content using the jsonlite::fromJSON:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="machine-learning-capstone-project.html#cb5-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">fromJSON</span>(spacex_url)</span></code></pre></div>
<p>We notice that a lot of the data are IDs. For example the rocket column has no information about the rocket just an identification number.</p>
<p>We will now use the API again to get information about the launches using the IDs given for each launch. Specifically we will be using columns rocket, paayloads, launchpad, and cores. Moreover we need to extract primary payload, extract the date of date_utc as well as unfold the cores tibble into separate columns.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="machine-learning-capstone-project.html#cb6-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="machine-learning-capstone-project.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rocket,payloads,launchpad,cores,flight_number,date_utc) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="machine-learning-capstone-project.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hoist</span>(payloads,<span class="at">payload_new =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="machine-learning-capstone-project.html#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(cores) <span class="sc">%&gt;%</span> </span>
<span id="cb6-5"><a href="machine-learning-capstone-project.html#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">&quot;payloads&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-6"><a href="machine-learning-capstone-project.html#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">payloads =</span> payload_new) <span class="sc">%&gt;%</span> </span>
<span id="cb6-7"><a href="machine-learning-capstone-project.html#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">date</span>(date_utc))</span></code></pre></div>
<p>Let us have a look at the data types of the columns:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="machine-learning-capstone-project.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code></pre></div>
<pre><code>## tibble [113 × 15] (S3: tbl_df/tbl/data.frame)
##  $ rocket         : chr [1:113] &quot;5e9d0d95eda69955f709d1eb&quot; &quot;5e9d0d95eda69955f709d1eb&quot; &quot;5e9d0d95eda69955f709d1eb&quot; &quot;5e9d0d95eda69955f709d1eb&quot; ...
##  $ payloads       : chr [1:113] &quot;5eb0e4b5b6c3bb0006eeb1e1&quot; &quot;5eb0e4b6b6c3bb0006eeb1e2&quot; &quot;5eb0e4b6b6c3bb0006eeb1e3&quot; &quot;5eb0e4b7b6c3bb0006eeb1e5&quot; ...
##  $ launchpad      : chr [1:113] &quot;5e9e4502f5090995de566f86&quot; &quot;5e9e4502f5090995de566f86&quot; &quot;5e9e4502f5090995de566f86&quot; &quot;5e9e4502f5090995de566f86&quot; ...
##  $ core           : chr [1:113] &quot;5e9e289df35918033d3b2623&quot; &quot;5e9e289ef35918416a3b2624&quot; &quot;5e9e289ef3591814873b2625&quot; &quot;5e9e289ef3591855dc3b2626&quot; ...
##  $ flight         : int [1:113] 1 1 1 1 1 1 1 1 1 1 ...
##  $ gridfins       : logi [1:113] FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ legs           : logi [1:113] FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ reused         : logi [1:113] FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ landing_attempt: logi [1:113] FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ landing_success: logi [1:113] NA NA NA NA NA NA ...
##  $ landing_type   : chr [1:113] NA NA NA NA ...
##  $ landpad        : chr [1:113] NA NA NA NA ...
##  $ flight_number  : int [1:113] 1 2 3 4 5 6 7 8 9 10 ...
##  $ date_utc       : chr [1:113] &quot;2006-03-24T22:30:00.000Z&quot; &quot;2007-03-21T01:10:00.000Z&quot; &quot;2008-08-03T03:34:00.000Z&quot; &quot;2008-09-28T23:15:00.000Z&quot; ...
##  $ Date           : Date[1:113], format: &quot;2006-03-24&quot; &quot;2007-03-21&quot; &quot;2008-08-03&quot; &quot;2008-09-28&quot; ...</code></pre>
<p>We will now use the API again to get information about the launches using the IDs given for each launch. Specifically we will be using columns rocket, payloads, launchpad, and cores.</p>
<ul>
<li><p>From the rocket we would like to learn the booster name</p></li>
<li><p>From the payload we would like to learn the mass of the payload and the orbit that it is going to</p></li>
<li><p>From the launchpad we would like to know the name of the launch site being used, the longitude, and the latitude.</p></li>
<li><p>From cores we would like to learn the outcome of the landing, the type of the landing, number of flights with that core, whether gridfins were used, whether the core is reused, whether legs were used, the landing pad used, the block of the core which is a number used to seperate version of cores, the number of times this specific core has been reused, and the serial of the core.</p></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="machine-learning-capstone-project.html#cb9-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="machine-learning-capstone-project.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">BoosterVersion=</span><span class="cn">NA</span>,<span class="at">Longitude=</span><span class="cn">NA</span>,<span class="at">Latitude=</span><span class="cn">NA</span>,<span class="at">LaunchSite=</span><span class="cn">NA</span>,<span class="at">PayloadMass=</span><span class="cn">NA</span>,<span class="at">Orbit=</span><span class="cn">NA</span>,<span class="at">ReusedCount=</span><span class="cn">NA</span>,<span class="at">Block=</span><span class="cn">NA</span>, <span class="at">Serial=</span><span class="cn">NA</span>)</span>
<span id="cb9-3"><a href="machine-learning-capstone-project.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data)){</span>
<span id="cb9-4"><a href="machine-learning-capstone-project.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  rocket_url <span class="ot">=</span> <span class="fu">str_c</span>(<span class="st">&quot;https://api.spacexdata.com/v4/rockets/&quot;</span>,data<span class="sc">$</span>rocket[i])</span>
<span id="cb9-5"><a href="machine-learning-capstone-project.html#cb9-5" aria-hidden="true" tabindex="-1"></a>  launchpad_url <span class="ot">=</span> <span class="fu">str_c</span>(<span class="st">&quot;https://api.spacexdata.com/v4/launchpads/&quot;</span>,data<span class="sc">$</span>launchpad[i])</span>
<span id="cb9-6"><a href="machine-learning-capstone-project.html#cb9-6" aria-hidden="true" tabindex="-1"></a>  payloads_url <span class="ot">=</span> <span class="fu">str_c</span>(<span class="st">&quot;https://api.spacexdata.com/v4/payloads/&quot;</span>,data<span class="sc">$</span>payloads[i])</span>
<span id="cb9-7"><a href="machine-learning-capstone-project.html#cb9-7" aria-hidden="true" tabindex="-1"></a>  core_url <span class="ot">=</span> <span class="fu">str_c</span>(<span class="st">&quot;https://api.spacexdata.com/v4/cores/&quot;</span>,data<span class="sc">$</span>core[i])</span>
<span id="cb9-8"><a href="machine-learning-capstone-project.html#cb9-8" aria-hidden="true" tabindex="-1"></a>  response_rocket <span class="ot">=</span> <span class="fu">fromJSON</span>(rocket_url)</span>
<span id="cb9-9"><a href="machine-learning-capstone-project.html#cb9-9" aria-hidden="true" tabindex="-1"></a>  response_launchpad <span class="ot">=</span> <span class="fu">fromJSON</span>(launchpad_url)</span>
<span id="cb9-10"><a href="machine-learning-capstone-project.html#cb9-10" aria-hidden="true" tabindex="-1"></a>  response_payloads <span class="ot">=</span> <span class="fu">fromJSON</span>(payloads_url)</span>
<span id="cb9-11"><a href="machine-learning-capstone-project.html#cb9-11" aria-hidden="true" tabindex="-1"></a>  response_core <span class="ot">=</span> <span class="fu">fromJSON</span>(core_url)</span>
<span id="cb9-12"><a href="machine-learning-capstone-project.html#cb9-12" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>BoosterVersion[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(response_rocket<span class="sc">$</span>name),<span class="cn">NA</span>,</span>
<span id="cb9-13"><a href="machine-learning-capstone-project.html#cb9-13" aria-hidden="true" tabindex="-1"></a>                                   response_rocket<span class="sc">$</span>name)</span>
<span id="cb9-14"><a href="machine-learning-capstone-project.html#cb9-14" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>Longitude[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(response_launchpad<span class="sc">$</span>longitude),<span class="cn">NA</span>,</span>
<span id="cb9-15"><a href="machine-learning-capstone-project.html#cb9-15" aria-hidden="true" tabindex="-1"></a>                              response_launchpad<span class="sc">$</span>longitude)</span>
<span id="cb9-16"><a href="machine-learning-capstone-project.html#cb9-16" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>Latitude[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(response_launchpad<span class="sc">$</span>latitude),<span class="cn">NA</span>,</span>
<span id="cb9-17"><a href="machine-learning-capstone-project.html#cb9-17" aria-hidden="true" tabindex="-1"></a>                             response_launchpad<span class="sc">$</span>latitude)</span>
<span id="cb9-18"><a href="machine-learning-capstone-project.html#cb9-18" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>LaunchSite[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(response_launchpad<span class="sc">$</span>name),<span class="cn">NA</span>,</span>
<span id="cb9-19"><a href="machine-learning-capstone-project.html#cb9-19" aria-hidden="true" tabindex="-1"></a>                               response_launchpad<span class="sc">$</span>name)</span>
<span id="cb9-20"><a href="machine-learning-capstone-project.html#cb9-20" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>PayloadMass[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(response_payloads<span class="sc">$</span>mass_kg),<span class="cn">NA</span>,</span>
<span id="cb9-21"><a href="machine-learning-capstone-project.html#cb9-21" aria-hidden="true" tabindex="-1"></a>                                response_payloads<span class="sc">$</span>mass_kg)</span>
<span id="cb9-22"><a href="machine-learning-capstone-project.html#cb9-22" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>Orbit[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(response_payloads<span class="sc">$</span>orbit),<span class="cn">NA</span>,</span>
<span id="cb9-23"><a href="machine-learning-capstone-project.html#cb9-23" aria-hidden="true" tabindex="-1"></a>                          response_payloads<span class="sc">$</span>orbit)</span>
<span id="cb9-24"><a href="machine-learning-capstone-project.html#cb9-24" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>ReusedCount[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(response_core<span class="sc">$</span>reuse_count),<span class="cn">NA</span>,</span>
<span id="cb9-25"><a href="machine-learning-capstone-project.html#cb9-25" aria-hidden="true" tabindex="-1"></a>                                response_core<span class="sc">$</span>reuse_count)</span>
<span id="cb9-26"><a href="machine-learning-capstone-project.html#cb9-26" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>Block[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(response_core<span class="sc">$</span>block),<span class="cn">NA</span>,</span>
<span id="cb9-27"><a href="machine-learning-capstone-project.html#cb9-27" aria-hidden="true" tabindex="-1"></a>                          response_core<span class="sc">$</span>block)</span>
<span id="cb9-28"><a href="machine-learning-capstone-project.html#cb9-28" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>Serial[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(response_core<span class="sc">$</span>serial),<span class="cn">NA</span>,</span>
<span id="cb9-29"><a href="machine-learning-capstone-project.html#cb9-29" aria-hidden="true" tabindex="-1"></a>                          response_core<span class="sc">$</span>serial)</span>
<span id="cb9-30"><a href="machine-learning-capstone-project.html#cb9-30" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The outcome of a launch will be a concenation of “landing_success” and “landing_type”:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="machine-learning-capstone-project.html#cb10-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Outcome <span class="ot">=</span> <span class="fu">str_c</span>(data<span class="sc">$</span>landing_success,data<span class="sc">$</span>landing_type,<span class="at">sep=</span><span class="st">&quot; &quot;</span>)</span></code></pre></div>
<p>Now we select the relevant columns and filter the observations where Falcon 9 was used.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="machine-learning-capstone-project.html#cb11-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="machine-learning-capstone-project.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(FlightNumber,Date,BoosterVersion,PayloadMass,Orbit,</span>
<span id="cb11-3"><a href="machine-learning-capstone-project.html#cb11-3" aria-hidden="true" tabindex="-1"></a>         LaunchSite,Outcome,Flights,GridFins,Reused,</span>
<span id="cb11-4"><a href="machine-learning-capstone-project.html#cb11-4" aria-hidden="true" tabindex="-1"></a>         Legs,LandingPad,Block,ReusedCount,Serial,Longitude,</span>
<span id="cb11-5"><a href="machine-learning-capstone-project.html#cb11-5" aria-hidden="true" tabindex="-1"></a>         Latitude) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="machine-learning-capstone-project.html#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(BoosterVersion <span class="sc">==</span> <span class="st">&quot;Falcon 9&quot;</span>)</span></code></pre></div>
<p>Let us have a final look at the data before we move on to data wrangling:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="machine-learning-capstone-project.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data,<span class="at">width=</span><span class="cn">Inf</span>)</span></code></pre></div>
</div>
<div id="data-wrangling" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Data Wrangling</h2>
<p>In this section we will take a look at the data collected in the previous section. We will deal with missing values and introduce an outcome class variable to distinguish
between successful and unsuccessful landings.</p>
<p>In case the data collection fails, we begin by loading the pre-downloaded data set:</p>
<p>Lets have a glimpse at the dataframe:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="machine-learning-capstone-project.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(data)</span></code></pre></div>
<pre><code>## Rows: 99
## Columns: 17
## $ FlightNumber   &lt;dbl&gt; 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48…
## $ Date           &lt;date&gt; 2010-06-04, 2010-12-08, 2012-05-22, 2012-10-08, 2013-03-01, 2013-09-29, 2013-12-03, 2014-01-06, 2014-04-18, 2014-07-14, 2014-08-05, 2014-09-07, 2014-09-21, 2015-01-1…
## $ BoosterVersion &lt;chr&gt; &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;, &quot;Falcon 9&quot;…
## $ PayloadMass    &lt;dbl&gt; NA, NA, 525.00, 400.00, 677.00, 500.00, 3170.00, 3325.00, 2296.00, 1316.00, 4535.00, 4428.00, 2216.00, 2395.00, 570.00, 1954.00, 1898.00, 4707.00, 2477.00, 2034.00, 5…
## $ Orbit          &lt;chr&gt; &quot;LEO&quot;, &quot;LEO&quot;, &quot;LEO&quot;, &quot;ISS&quot;, &quot;ISS&quot;, &quot;PO&quot;, &quot;GTO&quot;, &quot;GTO&quot;, &quot;ISS&quot;, &quot;LEO&quot;, &quot;GTO&quot;, &quot;GTO&quot;, &quot;ISS&quot;, &quot;ISS&quot;, &quot;ES-L1&quot;, &quot;GTO&quot;, &quot;ISS&quot;, &quot;GTO&quot;, &quot;ISS&quot;, &quot;LEO&quot;, &quot;PO&quot;, &quot;GTO&quot;, &quot;ISS&quot;, &quot;GTO&quot;…
## $ LaunchSite     &lt;chr&gt; &quot;CCSFS SLC 40&quot;, &quot;CCSFS SLC 40&quot;, &quot;CCSFS SLC 40&quot;, &quot;CCSFS SLC 40&quot;, &quot;CCSFS SLC 40&quot;, &quot;VAFB SLC 4E&quot;, &quot;CCSFS SLC 40&quot;, &quot;CCSFS SLC 40&quot;, &quot;CCSFS SLC 40&quot;, &quot;CCSFS SLC 40&quot;, &quot;CCSFS …
## $ Outcome        &lt;chr&gt; NA, NA, NA, NA, NA, &quot;FALSE Ocean&quot;, NA, NA, &quot;TRUE Ocean&quot;, &quot;TRUE Ocean&quot;, NA, NA, &quot;FALSE Ocean&quot;, &quot;FALSE ASDS&quot;, &quot;TRUE Ocean&quot;, NA, &quot;FALSE ASDS&quot;, NA, NA, &quot;TRUE RTLS&quot;, &quot;FALS…
## $ Flights        &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 1, 2…
## $ GridFins       &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, FALSE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, T…
## $ Reused         &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…
## $ Legs           &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, FALSE, FALSE, FALSE, TRUE, TRUE, FALSE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…
## $ LandingPad     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;5e9e3032383ecb761634e7cb&quot;, NA, NA, &quot;5e9e3032383ecb761634e7cb&quot;, NA, &quot;5e9e3032383ecb6bb234e7ca&quot;, &quot;5e9e3032383ecb267…
## $ Block          &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 2, 3, 3, 3, 3, 3, 3, 4, 3, 4, 4, 3, 4, 3, 3, 4, 3, 3, 4, 4, 4, 4, 5, 4…
## $ ReusedCount    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 3, 1…
## $ Serial         &lt;chr&gt; &quot;B0003&quot;, &quot;B0004&quot;, &quot;B0005&quot;, &quot;B0006&quot;, &quot;B0007&quot;, &quot;B1003&quot;, &quot;B1004&quot;, &quot;B1005&quot;, &quot;B1006&quot;, &quot;B1007&quot;, &quot;B1008&quot;, &quot;B1011&quot;, &quot;B1010&quot;, &quot;B1012&quot;, &quot;B1013&quot;, &quot;B1014&quot;, &quot;B1015&quot;, &quot;B1016&quot;, &quot;B10…
## $ Longitude      &lt;dbl&gt; -80.57737, -80.57737, -80.57737, -80.57737, -80.57737, -120.61083, -80.57737, -80.57737, -80.57737, -80.57737, -80.57737, -80.57737, -80.57737, -80.57737, -80.57737, …
## $ Latitude       &lt;dbl&gt; 28.56186, 28.56186, 28.56186, 28.56186, 28.56186, 34.63209, 28.56186, 28.56186, 28.56186, 28.56186, 28.56186, 28.56186, 28.56186, 28.56186, 28.56186, 28.56186, 28.561…</code></pre>
<p>Lets first identify and calculate the percentage of the missing values in each attribute</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="machine-learning-capstone-project.html#cb15-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="machine-learning-capstone-project.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">which</span>(<span class="fu">colSums</span>(<span class="fu">is.na</span>(.))<span class="sc">&gt;</span><span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="machine-learning-capstone-project.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(<span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.))<span class="sc">/</span><span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span>) </span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   PayloadMass Outcome LandingPad
##         &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
## 1        7.07    26.3       31.3</code></pre>
<p>Missing values in <em>Outcome</em> refers to both <em>Landing_success</em> and <em>Landing_type</em> being false. These will be replaced by “FALSE FALSE.” We then see, that in the data set, there are several different cases where the booster did not land successfully. Sometimes a landing was attempted but failed due to an accident; for example, True Ocean means the mission outcome was successfully landed to a specific region of the ocean while False Ocean means the mission outcome was unsuccessfully landed to a specific region of the ocean. True RTLS means the mission outcome was successfully landed to a ground pad False RTLS means the mission outcome was unsuccessfully landed to a ground pad.True ASDS means the mission outcome was successfully landed on a drone ship False ASDS means the mission outcome was unsuccessfully landed on a drone ship.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="machine-learning-capstone-project.html#cb17-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="machine-learning-capstone-project.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Outcome =</span> </span>
<span id="cb17-3"><a href="machine-learning-capstone-project.html#cb17-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace</span>(Outcome,<span class="fu">is.na</span>(Outcome),<span class="st">&quot;FALSE FALSE&quot;</span>)</span>
<span id="cb17-4"><a href="machine-learning-capstone-project.html#cb17-4" aria-hidden="true" tabindex="-1"></a>         )</span></code></pre></div>
<p>To deal with missing values in <em>PayloadsMass</em> we replace <em>NA</em> with mean payload mass:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="machine-learning-capstone-project.html#cb18-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="machine-learning-capstone-project.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PayloadMass =</span> </span>
<span id="cb18-3"><a href="machine-learning-capstone-project.html#cb18-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace</span>(PayloadMass,<span class="fu">is.na</span>(PayloadMass),<span class="fu">mean</span>(PayloadMass,<span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb18-4"><a href="machine-learning-capstone-project.html#cb18-4" aria-hidden="true" tabindex="-1"></a>         )</span></code></pre></div>
<p>This leaves us with only the LandingPad column containing missing values. Since most models cannot handle NA, these will be replaced with FALSE:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="machine-learning-capstone-project.html#cb19-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="machine-learning-capstone-project.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">LandingPad =</span> <span class="fu">replace_na</span>(LandingPad,<span class="st">&quot;FALSE&quot;</span>))</span></code></pre></div>
<p>The data contains several Space X launch facilities: Cape Canaveral Space Launch Complex 40 VAFB SLC 4E , Vandenberg Air Force Base Space Launch Complex 4E (SLC-4E), Kennedy Space Center Launch Complex 39A KSC LC 39A .The location of each Launch Is placed in the column LaunchSite</p>
<p>Next, let’s see the number of launches for each site.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="machine-learning-capstone-project.html#cb20-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="machine-learning-capstone-project.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LaunchSite) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="machine-learning-capstone-project.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
## # Groups:   LaunchSite [3]
##   LaunchSite       n
##   &lt;chr&gt;        &lt;int&gt;
## 1 CCSFS SLC 40    60
## 2 KSC LC 39A      24
## 3 VAFB SLC 4E     15</code></pre>
<p>Then let’s have a look at the different orbits used</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="machine-learning-capstone-project.html#cb22-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="machine-learning-capstone-project.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Orbit) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="machine-learning-capstone-project.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code></pre></div>
<pre><code>## # A tibble: 11 × 2
## # Groups:   Orbit [11]
##    Orbit     n
##    &lt;chr&gt; &lt;int&gt;
##  1 ES-L1     1
##  2 GEO       1
##  3 GTO      30
##  4 HEO       1
##  5 ISS      23
##  6 LEO       8
##  7 MEO       3
##  8 PO       10
##  9 SO        1
## 10 SSO       6
## 11 VLEO     15</code></pre>
<p>Finally let us have a look at the different landing outcomes</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="machine-learning-capstone-project.html#cb24-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="machine-learning-capstone-project.html#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Outcome) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="machine-learning-capstone-project.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code></pre></div>
<pre><code>## # A tibble: 7 × 2
## # Groups:   Outcome [7]
##   Outcome         n
##   &lt;chr&gt;       &lt;int&gt;
## 1 FALSE ASDS      7
## 2 FALSE FALSE    26
## 3 FALSE Ocean     2
## 4 FALSE RTLS      1
## 5 TRUE ASDS      44
## 6 TRUE Ocean      5
## 7 TRUE RTLS      14</code></pre>
<p>True Ocean means the mission outcome was successfully landed to a specific region of the ocean while False Ocean means the mission outcome was unsuccessfully landed to a specific region of the ocean. True RTLS means the mission outcome was successfully landed to a ground pad False RTLS means the mission outcome was unsuccessfully landed to a ground pad.True ASDS means the mission outcome was successfully landed to a drone ship False ASDS means the mission outcome was unsuccessfully landed to a drone ship. None ASDS and None None these represent a failure to land.</p>
<p>For modelling purposes later, we would like to have a landing outcome variable “Class,” where all successful landings are denoted by a “1” and all other by a “0.”</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="machine-learning-capstone-project.html#cb26-1" aria-hidden="true" tabindex="-1"></a>successful_outcomes<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;TRUE ASDS&quot;</span>, <span class="st">&quot;TRUE Ocean&quot;</span>, <span class="st">&quot;TRUE RTLS&quot;</span>)</span>
<span id="cb26-2"><a href="machine-learning-capstone-project.html#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="machine-learning-capstone-project.html#cb26-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="machine-learning-capstone-project.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Class =</span> <span class="fu">ifelse</span>(Outcome <span class="sc">%in%</span> successful_outcomes,<span class="dv">1</span>,<span class="dv">0</span>)) </span></code></pre></div>
<p>Let us finally find the average succesrate:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="machine-learning-capstone-project.html#cb27-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="machine-learning-capstone-project.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Class =</span> <span class="fu">mean</span>(Class))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   Class
##   &lt;dbl&gt;
## 1 0.636</code></pre>
<p>With this we conclude the data wrangling section. In the next section we take a look at different visualizations of the dataset.</p>
</div>
<div id="eda-with-visualizations" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> EDA with Visualizations</h2>
<p>First, let’s try to see how the FlightNumber (indicating the continuous launch attempts.) and Payload variables would affect the launch outcome.</p>
<p>We can plot out the FlightNumber vs. PayloadMassand overlay the outcome of the launch. We see that as the flight number increases, the first stage is more likely to land successfully. The payload mass is also important; it seems the more massive the payload, the less likely the first stage will return.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="machine-learning-capstone-project.html#cb29-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="machine-learning-capstone-project.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>FlightNumber,<span class="at">y=</span>PayloadMass,<span class="at">color=</span><span class="fu">as.factor</span>(Class))) <span class="sc">+</span></span>
<span id="cb29-3"><a href="machine-learning-capstone-project.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb29-4"><a href="machine-learning-capstone-project.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_hue</span>(<span class="st">&quot;Mission Outcome&quot;</span>,</span>
<span id="cb29-5"><a href="machine-learning-capstone-project.html#cb29-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb29-6"><a href="machine-learning-capstone-project.html#cb29-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Failure&quot;</span>,<span class="st">&quot;Success&quot;</span>)</span>
<span id="cb29-7"><a href="machine-learning-capstone-project.html#cb29-7" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb29-8"><a href="machine-learning-capstone-project.html#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Flight Number&quot;</span>, <span class="at">y=</span><span class="st">&quot;Payload Mass (kg)&quot;</span>, <span class="at">color=</span><span class="st">&quot;Outcome&quot;</span>, <span class="at">title=</span><span class="st">&quot;Payload Mass vs. Flight Number&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/fig_scatter_flight_payload-1.png" width="1344" />
Next we will drill down to each launch site and look at their detailed launch records.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="machine-learning-capstone-project.html#cb30-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="machine-learning-capstone-project.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>FlightNumber,<span class="at">y=</span>LaunchSite,<span class="at">color=</span><span class="fu">as.factor</span>(Class))) <span class="sc">+</span></span>
<span id="cb30-3"><a href="machine-learning-capstone-project.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb30-4"><a href="machine-learning-capstone-project.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_hue</span>(<span class="st">&quot;Mission Outcome&quot;</span>,</span>
<span id="cb30-5"><a href="machine-learning-capstone-project.html#cb30-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb30-6"><a href="machine-learning-capstone-project.html#cb30-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Failure&quot;</span>,<span class="st">&quot;Success&quot;</span>)</span>
<span id="cb30-7"><a href="machine-learning-capstone-project.html#cb30-7" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb30-8"><a href="machine-learning-capstone-project.html#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Flight Number&quot;</span>, <span class="at">y=</span><span class="st">&quot;Launch Site&quot;</span>, <span class="at">color=</span><span class="st">&quot;Outcome&quot;</span>, <span class="at">title=</span><span class="st">&quot;Launch Site vs. Flight Number&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/fig_scatter_flight_launch-1.png" width="1344" />
We see that the flight is more likely to succeed from VAFB SLC 4E and KSC LC 39A. Moreover VAFB SLC 4E has not been used for later launches.</p>
<p>We also want to observe if there is any relationship between launch sites and their payload mass.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="machine-learning-capstone-project.html#cb31-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="machine-learning-capstone-project.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>PayloadMass,<span class="at">y=</span>LaunchSite,<span class="at">color=</span><span class="fu">as.factor</span>(Class))) <span class="sc">+</span></span>
<span id="cb31-3"><a href="machine-learning-capstone-project.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb31-4"><a href="machine-learning-capstone-project.html#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_hue</span>(<span class="st">&quot;Mission Outcome&quot;</span>,</span>
<span id="cb31-5"><a href="machine-learning-capstone-project.html#cb31-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb31-6"><a href="machine-learning-capstone-project.html#cb31-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Failure&quot;</span>,<span class="st">&quot;Success&quot;</span>)</span>
<span id="cb31-7"><a href="machine-learning-capstone-project.html#cb31-7" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb31-8"><a href="machine-learning-capstone-project.html#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Payload Mass (kg)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Launch Site&quot;</span>, <span class="at">color=</span><span class="st">&quot;Outcome&quot;</span>, <span class="at">title=</span><span class="st">&quot;Launch Site vs. Payload Mass&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/fig_scatter_launch_payload-1.png" width="1344" />
Now if we observe Payload Vs. Launch Site scatter point chart we, that find for the VAFB-SLC launchsite there are no rockets launched for heavy payload mass(greater than 10000).</p>
<p>Next, we want to visually check if there are any relationship between success rate and orbit type.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="machine-learning-capstone-project.html#cb32-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="machine-learning-capstone-project.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Orbit) <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="machine-learning-capstone-project.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">success =</span> <span class="fu">mean</span>(Class)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="machine-learning-capstone-project.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Orbit,<span class="at">weight=</span>success,<span class="at">fill=</span>Orbit)) <span class="sc">+</span> </span>
<span id="cb32-5"><a href="machine-learning-capstone-project.html#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">show.legend=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/fig_bar_orbit-1.png" width="672" /></p>
<p>Orbits ES-L1, GEO, HEO and SSO have highest success rates followed by VLEO.</p>
<p>Finally we would like to explore if there is a relationsship between flight number and orbit type used:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="machine-learning-capstone-project.html#cb33-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="machine-learning-capstone-project.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>FlightNumber,<span class="at">y=</span>Orbit,<span class="at">color=</span><span class="fu">as.factor</span>(Class))) <span class="sc">+</span></span>
<span id="cb33-3"><a href="machine-learning-capstone-project.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb33-4"><a href="machine-learning-capstone-project.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_hue</span>(<span class="st">&quot;Mission Outcome&quot;</span>,</span>
<span id="cb33-5"><a href="machine-learning-capstone-project.html#cb33-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb33-6"><a href="machine-learning-capstone-project.html#cb33-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Failure&quot;</span>,<span class="st">&quot;Success&quot;</span>)</span>
<span id="cb33-7"><a href="machine-learning-capstone-project.html#cb33-7" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb33-8"><a href="machine-learning-capstone-project.html#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;FlightNumber&quot;</span>, <span class="at">y=</span><span class="st">&quot;Orbit&quot;</span>, <span class="at">color=</span><span class="st">&quot;Outcome&quot;</span>, <span class="at">title=</span><span class="st">&quot;Orbit Type vs Flight Number&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/fig_scatter_flight_outcome-1.png" width="1344" />
We see that the successful orbit types correlates with later flight numbers. It is not yet evident
if the flights are succesful due to choice of orbit og because of experience.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="machine-learning-capstone-project.html#cb34-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="machine-learning-capstone-project.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date=</span><span class="fu">year</span>(Date)) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="machine-learning-capstone-project.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Date) <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="machine-learning-capstone-project.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">success =</span> <span class="fu">mean</span>(Class)) <span class="sc">%&gt;%</span> </span>
<span id="cb34-5"><a href="machine-learning-capstone-project.html#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Date,<span class="at">y=</span>success)) <span class="sc">+</span></span>
<span id="cb34-6"><a href="machine-learning-capstone-project.html#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb34-7"><a href="machine-learning-capstone-project.html#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2010</span>,<span class="dv">2020</span>),<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">2010</span>,<span class="dv">2020</span>)) <span class="sc">+</span></span>
<span id="cb34-8"><a href="machine-learning-capstone-project.html#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limit=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb34-9"><a href="machine-learning-capstone-project.html#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Year&quot;</span>, <span class="at">y=</span><span class="st">&quot;Success Rate&quot;</span>, <span class="at">title=</span><span class="st">&quot;Trend in success rate&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/fig_line_year_successrate-1.png" width="1344" /></p>
<p>We observe that success rate has been steadily increasing since 2013 with the exception of 2018. As noted earlier it is not possible to determine if the increase is related to use of orbit type of mere experience.</p>
<p>With this, we conclude the visualization of the dataset. In the next section we take a look at the geospatial data related to the launches.</p>
</div>
<div id="interactive-visual-analytics" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Interactive Visual Analytics</h2>
<p>In this section we will first analyze the geospatial data in the dataset. The spatial data refers primarily to the launch sites. Thus we will have a look at what characterizes the launch sites using an interactive map.</p>
<p>In the second part of this section an interactive dashboard to enable further visual EDA of the dataset has been develop using RShiny.</p>
<div id="map-data-with-leaflet" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Map data with Leaflet</h3>
<p>The launch success rate may depend on many factors such as payload mass, orbit type, and so on. It may also depend on the location and proximities of a launch site, i.e., the initial position of rocket trajectories. Finding an optimal location for building a launch site certainly involves many factors and hopefully we could discover some of the factors by analyzing the existing launch site locations.</p>
<p>We start by selecting the geospatial data and grouping it by launch site:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="machine-learning-capstone-project.html#cb35-1" aria-hidden="true" tabindex="-1"></a>nasa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">29.55968</span>,<span class="sc">-</span><span class="fl">95.08310</span>) </span>
<span id="cb35-2"><a href="machine-learning-capstone-project.html#cb35-2" aria-hidden="true" tabindex="-1"></a>geodata <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="machine-learning-capstone-project.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(LaunchSite,Latitude,Longitude) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="machine-learning-capstone-project.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LaunchSite) <span class="sc">%&gt;%</span> </span>
<span id="cb35-5"><a href="machine-learning-capstone-project.html#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(LaunchSite,Latitude,Longitude)</span></code></pre></div>
<p>First let us initiate a map centered at the NASA Johnson Space Center in Houston, Tx, and mark the three launch sites on the map:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="machine-learning-capstone-project.html#cb36-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(<span class="at">options =</span> <span class="fu">leafletOptions</span>(<span class="at">center=</span>nasa,<span class="at">zoom=</span><span class="dv">4</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="machine-learning-capstone-project.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="machine-learning-capstone-project.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lat=</span>geodata<span class="sc">$</span>Latitude,<span class="at">lng=</span>geodata<span class="sc">$</span>Longitude,<span class="at">popup =</span> geodata<span class="sc">$</span>LaunchSite,<span class="at">label=</span>geodata<span class="sc">$</span>LaunchSite) <span class="sc">%&gt;%</span> </span>
<span id="cb36-4"><a href="machine-learning-capstone-project.html#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="at">lat=</span>geodata<span class="sc">$</span>Latitude,<span class="at">lng=</span>geodata<span class="sc">$</span>Longitude,<span class="at">radius=</span><span class="dv">10</span>,<span class="at">color=</span><span class="st">&quot;#d35400&quot;</span>,<span class="at">fill=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb36-5"><a href="machine-learning-capstone-project.html#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lat=</span>nasa[<span class="dv">1</span>],<span class="at">lng=</span>nasa[<span class="dv">2</span>],<span class="at">popup =</span> <span class="st">&quot;NASA Johnson Space Center&quot;</span> ,<span class="at">label=</span><span class="st">&quot;NASA JSC&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-6"><a href="machine-learning-capstone-project.html#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="at">lat=</span>nasa[<span class="dv">1</span>],<span class="at">lng=</span>nasa[<span class="dv">2</span>],<span class="at">radius=</span><span class="dv">10</span>,<span class="at">color=</span><span class="st">&quot;#d35400&quot;</span>,<span class="at">fill=</span><span class="cn">TRUE</span>)</span>
<span id="cb36-7"><a href="machine-learning-capstone-project.html#cb36-7" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<div id="htmlwidget-e8365edc6107a9a9376a" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-e8365edc6107a9a9376a">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"center":[29.55968,-95.0831],"zoom":4},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[28.5618571,34.632093,28.6080585],[-80.577366,-120.610829,-80.6039558],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["CCSFS SLC 40","VAFB SLC 4E","KSC LC 39A"],null,null,null,["CCSFS SLC 40","VAFB SLC 4E","KSC LC 39A"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[28.5618571,34.632093,28.6080585],[-80.577366,-120.610829,-80.6039558],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#d35400","weight":5,"opacity":0.5,"fill":true,"fillColor":"#d35400","fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[29.55968,-95.0831,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"NASA Johnson Space Center",null,null,null,"NASA JSC",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[29.55968,-95.0831,10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#d35400","weight":5,"opacity":0.5,"fill":true,"fillColor":"#d35400","fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[28.5618571,34.632093],"lng":[-120.610829,-80.577366]}},"evals":[],"jsHooks":[]}</script>
<p>Next, let’s try to enhance the map by adding the launch outcomes for each site, and see which sites have high success rates. For this we need the launch data with outcome included. To facilitate colouring icons later we add a <em>Colour</em> column, where Colour is ‘green’ is Class is 1 and Colour is ‘red’ if Class is 0:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="machine-learning-capstone-project.html#cb37-1" aria-hidden="true" tabindex="-1"></a>launchdata <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="machine-learning-capstone-project.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(LaunchSite,Latitude,Longitude,Class) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="machine-learning-capstone-project.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">Color =</span> <span class="cn">NA</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="machine-learning-capstone-project.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Color =</span> <span class="fu">ifelse</span>(Class <span class="sc">==</span><span class="dv">1</span>,<span class="st">&#39;green&#39;</span>,<span class="st">&#39;red&#39;</span>))</span></code></pre></div>
<p>Now we build a map with each launch clustered at the launch sites and each launch icon coloured by the outcome class. In the top we add a reading of longitude and lattitude for mouse position:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="machine-learning-capstone-project.html#cb38-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(<span class="at">options =</span> <span class="fu">leafletOptions</span>(<span class="at">center=</span>nasa,<span class="at">zoom=</span><span class="dv">4</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="machine-learning-capstone-project.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="machine-learning-capstone-project.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addAwesomeMarkers</span>(<span class="at">lat=</span>launchdata<span class="sc">$</span>Latitude,<span class="at">lng=</span>launchdata<span class="sc">$</span>Longitude,<span class="at">popup =</span> launchdata<span class="sc">$</span>LaunchSite,<span class="at">label=</span>launchdata<span class="sc">$</span>LaunchSite, <span class="at">icon=</span><span class="fu">makeAwesomeIcon</span>(<span class="at">icon =</span> <span class="st">&quot;plane&quot;</span>, <span class="at">library =</span> <span class="st">&quot;ion&quot;</span>, <span class="at">markerColor=</span><span class="st">&#39;white&#39;</span>,<span class="at">iconColor =</span> launchdata<span class="sc">$</span>Color),<span class="at">clusterOptions =</span> <span class="fu">markerClusterOptions</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb38-4"><a href="machine-learning-capstone-project.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="at">lat=</span>geodata<span class="sc">$</span>Latitude,<span class="at">lng=</span>geodata<span class="sc">$</span>Longitude,<span class="at">radius=</span><span class="dv">10</span>,<span class="at">color=</span><span class="st">&quot;#d35400&quot;</span>,<span class="at">fill=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-5"><a href="machine-learning-capstone-project.html#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lat=</span>nasa[<span class="dv">1</span>],<span class="at">lng=</span>nasa[<span class="dv">2</span>],<span class="at">popup =</span> <span class="st">&quot;NASA Johnson Space Center&quot;</span> ,<span class="at">label=</span><span class="st">&quot;NASA JSC&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="machine-learning-capstone-project.html#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="at">lat=</span>nasa[<span class="dv">1</span>],<span class="at">lng=</span>nasa[<span class="dv">2</span>],<span class="at">radius=</span><span class="dv">10</span>,<span class="at">color=</span><span class="st">&quot;#d35400&quot;</span>,<span class="at">fill=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-7"><a href="machine-learning-capstone-project.html#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMouseCoordinates</span>()</span>
<span id="cb38-8"><a href="machine-learning-capstone-project.html#cb38-8" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<div id="htmlwidget-eadc65ccfa657f40f835" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-eadc65ccfa657f40f835">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"center":[29.55968,-95.0831],"zoom":4},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addAwesomeMarkers","args":[[28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,34.632093,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,34.632093,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,34.632093,28.6080585,28.6080585,28.6080585,28.6080585,28.6080585,28.6080585,28.6080585,34.632093,28.6080585,28.6080585,34.632093,28.6080585,34.632093,28.6080585,28.6080585,28.5618571,34.632093,28.5618571,28.5618571,34.632093,28.5618571,34.632093,28.5618571,28.5618571,28.6080585,34.632093,28.5618571,28.5618571,28.5618571,34.632093,28.5618571,28.5618571,34.632093,28.6080585,34.632093,28.5618571,28.5618571,34.632093,28.5618571,28.6080585,28.5618571,28.5618571,34.632093,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.5618571,28.6080585,28.5618571,28.5618571,28.5618571,28.6080585,28.6080585,28.6080585,28.5618571,28.5618571,28.5618571,28.5618571,28.6080585,28.5618571,28.5618571,28.6080585,28.6080585,28.6080585,28.5618571,28.5618571,28.6080585],[-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-120.610829,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-120.610829,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-120.610829,-80.6039558,-80.6039558,-80.6039558,-80.6039558,-80.6039558,-80.6039558,-80.6039558,-120.610829,-80.6039558,-80.6039558,-120.610829,-80.6039558,-120.610829,-80.6039558,-80.6039558,-80.577366,-120.610829,-80.577366,-80.577366,-120.610829,-80.577366,-120.610829,-80.577366,-80.577366,-80.6039558,-120.610829,-80.577366,-80.577366,-80.577366,-120.610829,-80.577366,-80.577366,-120.610829,-80.6039558,-120.610829,-80.577366,-80.577366,-120.610829,-80.577366,-80.6039558,-80.577366,-80.577366,-120.610829,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.577366,-80.6039558,-80.577366,-80.577366,-80.577366,-80.6039558,-80.6039558,-80.6039558,-80.577366,-80.577366,-80.577366,-80.577366,-80.6039558,-80.577366,-80.577366,-80.6039558,-80.6039558,-80.6039558,-80.577366,-80.577366,-80.6039558],{"icon":"plane","markerColor":"white","iconColor":["red","red","red","red","red","red","red","red","green","green","red","red","red","red","green","red","red","red","red","green","red","red","green","green","green","red","green","green","red","green","green","red","green","green","red","green","green","green","red","green","green","green","green","green","green","green","green","green","green","red","red","red","red","green","green","red","red","red","green","green","green","green","green","green","green","red","red","green","green","green","green","green","green","green","red","green","green","green","green","red","green","red","green","red","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green"],"spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"ion"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","KSC LC 39A","KSC LC 39A","KSC LC 39A","KSC LC 39A","KSC LC 39A","KSC LC 39A","KSC LC 39A","VAFB SLC 4E","KSC LC 39A","KSC LC 39A","VAFB SLC 4E","KSC LC 39A","VAFB SLC 4E","KSC LC 39A","KSC LC 39A","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","KSC LC 39A","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","KSC LC 39A","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","KSC LC 39A","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A"],null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,["CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","KSC LC 39A","KSC LC 39A","KSC LC 39A","KSC LC 39A","KSC LC 39A","KSC LC 39A","KSC LC 39A","VAFB SLC 4E","KSC LC 39A","KSC LC 39A","VAFB SLC 4E","KSC LC 39A","VAFB SLC 4E","KSC LC 39A","KSC LC 39A","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","KSC LC 39A","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","VAFB SLC 4E","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","KSC LC 39A","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A","KSC LC 39A","KSC LC 39A","CCSFS SLC 40","CCSFS SLC 40","KSC LC 39A"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[28.5618571,34.632093,28.6080585],[-80.577366,-120.610829,-80.6039558],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#d35400","weight":5,"opacity":0.5,"fill":true,"fillColor":"#d35400","fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[29.55968,-95.0831,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"NASA Johnson Space Center",null,null,null,"NASA JSC",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[29.55968,-95.0831,10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#d35400","weight":5,"opacity":0.5,"fill":true,"fillColor":"#d35400","fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[28.5618571,34.632093],"lng":[-120.610829,-80.577366]}},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>It seems that most successful launches were made from <em>KSC LC-39A</em>. Now we will read coordinates for the closest railway, highway, coastline and urban structure relative to this launchfacility:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="machine-learning-capstone-project.html#cb39-1" aria-hidden="true" tabindex="-1"></a>structure <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">&#39;Location&#39;</span><span class="ot">=</span><span class="fu">character</span>(),<span class="st">&#39;Lat&#39;</span><span class="ot">=</span><span class="fu">numeric</span>(),<span class="st">&#39;Lng&#39;</span><span class="ot">=</span><span class="fu">numeric</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="machine-learning-capstone-project.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;Location&#39;</span><span class="ot">=</span><span class="st">&#39;Coast&#39;</span>,<span class="st">&#39;Lng&#39;</span><span class="ot">=</span><span class="sc">-</span><span class="fl">80.59791</span>,<span class="st">&#39;Lat&#39;</span><span class="ot">=</span><span class="fl">28.61245</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="machine-learning-capstone-project.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;Location&#39;</span><span class="ot">=</span><span class="st">&#39;Urban&#39;</span>,<span class="st">&#39;Lng&#39;</span><span class="ot">=</span><span class="sc">-</span><span class="fl">80.81000</span>,<span class="st">&#39;Lat&#39;</span><span class="ot">=</span><span class="fl">28.61155</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="machine-learning-capstone-project.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;Location&#39;</span><span class="ot">=</span><span class="st">&#39;Highway&#39;</span>,<span class="st">&#39;Lng&#39;</span><span class="ot">=</span><span class="sc">-</span><span class="fl">80.66407</span>,<span class="st">&#39;Lat&#39;</span><span class="ot">=</span><span class="fl">28.52600</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-5"><a href="machine-learning-capstone-project.html#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;Location&#39;</span><span class="ot">=</span><span class="st">&#39;Railway&#39;</span>,<span class="st">&#39;Lng&#39;</span><span class="ot">=</span><span class="sc">-</span><span class="fl">80.61646</span>,<span class="st">&#39;Lat&#39;</span><span class="ot">=</span><span class="fl">28.62802</span>)</span>
<span id="cb39-6"><a href="machine-learning-capstone-project.html#cb39-6" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(structure,<span class="at">format=</span><span class="st">&#39;html&#39;</span>,<span class="at">align=</span><span class="st">&#39;c&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:center;">
Location
</th>
<th style="text-align:center;">
Lat
</th>
<th style="text-align:center;">
Lng
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Coast
</td>
<td style="text-align:center;">
28.61245
</td>
<td style="text-align:center;">
-80.59791
</td>
</tr>
<tr>
<td style="text-align:center;">
Urban
</td>
<td style="text-align:center;">
28.61155
</td>
<td style="text-align:center;">
-80.81000
</td>
</tr>
<tr>
<td style="text-align:center;">
Highway
</td>
<td style="text-align:center;">
28.52600
</td>
<td style="text-align:center;">
-80.66407
</td>
</tr>
<tr>
<td style="text-align:center;">
Railway
</td>
<td style="text-align:center;">
28.62802
</td>
<td style="text-align:center;">
-80.61646
</td>
</tr>
</tbody>
</table>
<p>To help calculating distances between positions of the map we define a function of latitude and longitude coordinates:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="machine-learning-capstone-project.html#cb40-1" aria-hidden="true" tabindex="-1"></a>distance_function <span class="ot">&lt;-</span> <span class="cf">function</span>(lat1,lng1,lat2,lng2){</span>
<span id="cb40-2"><a href="machine-learning-capstone-project.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  R <span class="ot">&lt;-</span> <span class="fl">6373.0</span></span>
<span id="cb40-3"><a href="machine-learning-capstone-project.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-4"><a href="machine-learning-capstone-project.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  lat1 <span class="ot">&lt;-</span> <span class="fu">deg2rad</span>(lat1)</span>
<span id="cb40-5"><a href="machine-learning-capstone-project.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  lng1 <span class="ot">&lt;-</span> <span class="fu">deg2rad</span>(lng1)</span>
<span id="cb40-6"><a href="machine-learning-capstone-project.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  lat2 <span class="ot">&lt;-</span> <span class="fu">deg2rad</span>(lat2)</span>
<span id="cb40-7"><a href="machine-learning-capstone-project.html#cb40-7" aria-hidden="true" tabindex="-1"></a>  lng2 <span class="ot">&lt;-</span> <span class="fu">deg2rad</span>(lng2)</span>
<span id="cb40-8"><a href="machine-learning-capstone-project.html#cb40-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-9"><a href="machine-learning-capstone-project.html#cb40-9" aria-hidden="true" tabindex="-1"></a>  dlon <span class="ot">&lt;-</span> lng2 <span class="sc">-</span> lng1</span>
<span id="cb40-10"><a href="machine-learning-capstone-project.html#cb40-10" aria-hidden="true" tabindex="-1"></a>  dlat <span class="ot">&lt;-</span> lat2 <span class="sc">-</span> lat1</span>
<span id="cb40-11"><a href="machine-learning-capstone-project.html#cb40-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-12"><a href="machine-learning-capstone-project.html#cb40-12" aria-hidden="true" tabindex="-1"></a>  a<span class="ot">=</span><span class="fu">sin</span>(dlat<span class="sc">/</span><span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span><span class="sc">+</span><span class="fu">cos</span>(lat1)<span class="sc">*</span><span class="fu">cos</span>(lat2)<span class="sc">*</span><span class="fu">sin</span>(dlon<span class="sc">/</span><span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb40-13"><a href="machine-learning-capstone-project.html#cb40-13" aria-hidden="true" tabindex="-1"></a>  c<span class="ot">=</span><span class="dv">2</span><span class="sc">*</span><span class="fu">atan2</span>(<span class="fu">sqrt</span>(a),<span class="fu">sqrt</span>(<span class="dv">1</span><span class="sc">-</span>a))</span>
<span id="cb40-14"><a href="machine-learning-capstone-project.html#cb40-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-15"><a href="machine-learning-capstone-project.html#cb40-15" aria-hidden="true" tabindex="-1"></a>  dist <span class="ot">=</span> R<span class="sc">*</span>c</span>
<span id="cb40-16"><a href="machine-learning-capstone-project.html#cb40-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(dist)</span>
<span id="cb40-17"><a href="machine-learning-capstone-project.html#cb40-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-18"><a href="machine-learning-capstone-project.html#cb40-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-19"><a href="machine-learning-capstone-project.html#cb40-19" aria-hidden="true" tabindex="-1"></a>distance_to_launch <span class="ot">&lt;-</span> <span class="cf">function</span>(lat,lng){</span>
<span id="cb40-20"><a href="machine-learning-capstone-project.html#cb40-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distance_function</span>(lat,lng,geodata<span class="sc">$</span>Latitude[<span class="dv">3</span>],geodata<span class="sc">$</span>Longitude[<span class="dv">3</span>])</span>
<span id="cb40-21"><a href="machine-learning-capstone-project.html#cb40-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We now add a column to the structure data with the distance from each structure to launch site KSC LC-39A</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="machine-learning-capstone-project.html#cb41-1" aria-hidden="true" tabindex="-1"></a>structure <span class="ot">&lt;-</span> structure <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="machine-learning-capstone-project.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="st">&#39;Distance&#39;</span><span class="ot">=</span><span class="cn">NA</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="machine-learning-capstone-project.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">&#39;Distance&#39;</span><span class="ot">=</span><span class="fu">map2</span>(structure<span class="sc">$</span>Lat,structure<span class="sc">$</span>Lng,<span class="sc">~</span><span class="fu">distance_to_launch</span>(.x,.y)))</span></code></pre></div>
<p>We now mark the coast, highway, railway and urban structures to the map together with the distance to <em>KSC LC-39A</em>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="machine-learning-capstone-project.html#cb42-1" aria-hidden="true" tabindex="-1"></a>linedata <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span><span class="fu">numeric</span>(),<span class="st">&#39;lng&#39;</span><span class="ot">=</span><span class="fu">numeric</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="machine-learning-capstone-project.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Latitude[<span class="dv">3</span>],<span class="st">&#39;lng&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Longitude[<span class="dv">3</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="machine-learning-capstone-project.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span>structure<span class="sc">$</span>Lat[<span class="dv">1</span>],<span class="st">&#39;lng&#39;</span><span class="ot">=</span>structure<span class="sc">$</span>Lng[<span class="dv">1</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb42-4"><a href="machine-learning-capstone-project.html#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Latitude[<span class="dv">3</span>],<span class="st">&#39;lng&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Longitude[<span class="dv">3</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb42-5"><a href="machine-learning-capstone-project.html#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span>structure<span class="sc">$</span>Lat[<span class="dv">2</span>],<span class="st">&#39;lng&#39;</span><span class="ot">=</span>structure<span class="sc">$</span>Lng[<span class="dv">2</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb42-6"><a href="machine-learning-capstone-project.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Latitude[<span class="dv">3</span>],<span class="st">&#39;lng&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Longitude[<span class="dv">3</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb42-7"><a href="machine-learning-capstone-project.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span>structure<span class="sc">$</span>Lat[<span class="dv">3</span>],<span class="st">&#39;lng&#39;</span><span class="ot">=</span>structure<span class="sc">$</span>Lng[<span class="dv">3</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb42-8"><a href="machine-learning-capstone-project.html#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Latitude[<span class="dv">3</span>],<span class="st">&#39;lng&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Longitude[<span class="dv">3</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb42-9"><a href="machine-learning-capstone-project.html#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span>structure<span class="sc">$</span>Lat[<span class="dv">4</span>],<span class="st">&#39;lng&#39;</span><span class="ot">=</span>structure<span class="sc">$</span>Lng[<span class="dv">4</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb42-10"><a href="machine-learning-capstone-project.html#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(<span class="st">&#39;lat&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Latitude[<span class="dv">3</span>],<span class="st">&#39;lng&#39;</span><span class="ot">=</span>geodata<span class="sc">$</span>Longitude[<span class="dv">3</span>])</span>
<span id="cb42-11"><a href="machine-learning-capstone-project.html#cb42-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-12"><a href="machine-learning-capstone-project.html#cb42-12" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(<span class="at">options =</span> <span class="fu">leafletOptions</span>(<span class="at">center=</span><span class="fu">c</span>(<span class="fl">28.61377</span>,<span class="sc">-</span><span class="fl">80.69307</span>),<span class="at">zoom=</span><span class="dv">11</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb42-13"><a href="machine-learning-capstone-project.html#cb42-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb42-14"><a href="machine-learning-capstone-project.html#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lat=</span>geodata<span class="sc">$</span>Latitude[<span class="dv">3</span>],<span class="at">lng=</span>geodata<span class="sc">$</span>Longitude[<span class="dv">3</span>],<span class="at">popup=</span>geodata<span class="sc">$</span>LaunchSite[<span class="dv">3</span>],<span class="at">label=</span>geodata<span class="sc">$</span>LaunchSite[<span class="dv">3</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb42-15"><a href="machine-learning-capstone-project.html#cb42-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lat=</span>structure<span class="sc">$</span>Lat,<span class="at">lng=</span>structure<span class="sc">$</span>Lng,<span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;Distance from &quot;</span>,structure<span class="sc">$</span>Location,<span class="st">&quot; to KSC LC-39A is &quot;</span>,<span class="fu">sprintf</span>(structure<span class="sc">$</span>Distance, <span class="at">fmt=</span><span class="st">&#39;%.2f&#39;</span>),<span class="st">&quot; km&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb42-16"><a href="machine-learning-capstone-project.html#cb42-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolylines</span>(<span class="at">lng=</span>linedata<span class="sc">$</span>lng,<span class="at">lat=</span>linedata<span class="sc">$</span>lat)</span>
<span id="cb42-17"><a href="machine-learning-capstone-project.html#cb42-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-18"><a href="machine-learning-capstone-project.html#cb42-18" aria-hidden="true" tabindex="-1"></a>m2</span></code></pre></div>
<div id="htmlwidget-a2aa178701a15eb9b751" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-a2aa178701a15eb9b751">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"center":[28.61377,-80.69307],"zoom":11},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[28.6080585,-80.6039558,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"KSC LC 39A",null,null,null,"KSC LC 39A",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[28.61245,28.61155,28.526,28.62802],[-80.59791,-80.81,-80.66407,-80.61646],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Distance from Coast to KSC LC-39A is 0.77 km","Distance from Urban to KSC LC-39A is 20.12 km","Distance from Highway to KSC LC-39A is 10.85 km","Distance from Railway to KSC LC-39A is 2.53 km"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolylines","args":[[[[{"lng":[-80.6039558,-80.59791,-80.6039558,-80.81,-80.6039558,-80.66407,-80.6039558,-80.61646,-80.6039558],"lat":[28.6080585,28.61245,28.6080585,28.61155,28.6080585,28.526,28.6080585,28.62802,28.6080585]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":false,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[28.526,28.62802],"lng":[-80.81,-80.59791]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="dashboard-for-further-visual-eda" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Dashboard for further visual EDA</h3>
<p>In this section we will develop a dashboard to further investigate
features of the launchsites. The dashboard will consist of a
piechart to show success rates for the launch sites with a dropdown
menu to select launch sites. Moreover we will have a scatterplot of
success class vs payload mass for all or individual launch sites
together with a slider to select payload mass range.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="machine-learning-capstone-project.html#cb43-1" aria-hidden="true" tabindex="-1"></a>launchsites <span class="ot">&lt;-</span> <span class="fu">c</span>(geodata<span class="sc">$</span>LaunchSite,<span class="st">&#39;All&#39;</span>)</span>
<span id="cb43-2"><a href="machine-learning-capstone-project.html#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="machine-learning-capstone-project.html#cb43-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb43-4"><a href="machine-learning-capstone-project.html#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;SpaceX Launch Records Dashboard&quot;</span>),</span>
<span id="cb43-5"><a href="machine-learning-capstone-project.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fluidRow</span>(<span class="fu">column</span>(<span class="dv">12</span>,</span>
<span id="cb43-6"><a href="machine-learning-capstone-project.html#cb43-6" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">selectInput</span>(<span class="st">&quot;site&quot;</span>,<span class="st">&quot;Select Launch Site&quot;</span>,launchsites,<span class="at">selected=</span><span class="st">&#39;All&#39;</span>)</span>
<span id="cb43-7"><a href="machine-learning-capstone-project.html#cb43-7" aria-hidden="true" tabindex="-1"></a>                  )),</span>
<span id="cb43-8"><a href="machine-learning-capstone-project.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fluidRow</span>(<span class="fu">column</span>(<span class="dv">12</span>,</span>
<span id="cb43-9"><a href="machine-learning-capstone-project.html#cb43-9" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">plotOutput</span>(<span class="st">&quot;piechart&quot;</span>)</span>
<span id="cb43-10"><a href="machine-learning-capstone-project.html#cb43-10" aria-hidden="true" tabindex="-1"></a>                  )),</span>
<span id="cb43-11"><a href="machine-learning-capstone-project.html#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fluidRow</span>(<span class="fu">column</span>(<span class="dv">2</span>,),</span>
<span id="cb43-12"><a href="machine-learning-capstone-project.html#cb43-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">column</span>(<span class="dv">8</span>,</span>
<span id="cb43-13"><a href="machine-learning-capstone-project.html#cb43-13" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">sliderInput</span>(<span class="st">&quot;payload&quot;</span>,<span class="st">&quot;Select Payload Mass Range&quot;</span>,</span>
<span id="cb43-14"><a href="machine-learning-capstone-project.html#cb43-14" aria-hidden="true" tabindex="-1"></a>                              <span class="dv">0</span>,<span class="dv">10000</span>,<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10000</span>),<span class="at">step=</span><span class="dv">1000</span>,<span class="at">width=</span><span class="st">&#39;100%&#39;</span>)</span>
<span id="cb43-15"><a href="machine-learning-capstone-project.html#cb43-15" aria-hidden="true" tabindex="-1"></a>                  ),</span>
<span id="cb43-16"><a href="machine-learning-capstone-project.html#cb43-16" aria-hidden="true" tabindex="-1"></a>           <span class="fu">column</span>(<span class="dv">2</span>,)),</span>
<span id="cb43-17"><a href="machine-learning-capstone-project.html#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fluidRow</span>(<span class="fu">column</span>(<span class="dv">12</span>,</span>
<span id="cb43-18"><a href="machine-learning-capstone-project.html#cb43-18" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">plotOutput</span>(<span class="st">&quot;scatterchart&quot;</span>)</span>
<span id="cb43-19"><a href="machine-learning-capstone-project.html#cb43-19" aria-hidden="true" tabindex="-1"></a>                  ))</span>
<span id="cb43-20"><a href="machine-learning-capstone-project.html#cb43-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-21"><a href="machine-learning-capstone-project.html#cb43-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-22"><a href="machine-learning-capstone-project.html#cb43-22" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb43-23"><a href="machine-learning-capstone-project.html#cb43-23" aria-hidden="true" tabindex="-1"></a>  site_select <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>site)</span>
<span id="cb43-24"><a href="machine-learning-capstone-project.html#cb43-24" aria-hidden="true" tabindex="-1"></a>  min_payload <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>payload[<span class="dv">1</span>])</span>
<span id="cb43-25"><a href="machine-learning-capstone-project.html#cb43-25" aria-hidden="true" tabindex="-1"></a>  max_payload <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>payload[<span class="dv">2</span>])</span>
<span id="cb43-26"><a href="machine-learning-capstone-project.html#cb43-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-27"><a href="machine-learning-capstone-project.html#cb43-27" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>piechart <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({ </span>
<span id="cb43-28"><a href="machine-learning-capstone-project.html#cb43-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">site_select</span>() <span class="sc">==</span> <span class="st">&#39;All&#39;</span>) </span>
<span id="cb43-29"><a href="machine-learning-capstone-project.html#cb43-29" aria-hidden="true" tabindex="-1"></a>    {     data <span class="sc">%&gt;%</span> </span>
<span id="cb43-30"><a href="machine-learning-capstone-project.html#cb43-30" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>,<span class="at">y=</span>Class,<span class="at">fill=</span><span class="fu">factor</span>(LaunchSite))) <span class="sc">+</span></span>
<span id="cb43-31"><a href="machine-learning-capstone-project.html#cb43-31" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="at">width=</span><span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb43-32"><a href="machine-learning-capstone-project.html#cb43-32" aria-hidden="true" tabindex="-1"></a>            <span class="fu">coord_polar</span>(<span class="at">theta=</span><span class="st">&quot;y&quot;</span>) <span class="sc">+</span></span>
<span id="cb43-33"><a href="machine-learning-capstone-project.html#cb43-33" aria-hidden="true" tabindex="-1"></a>            <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>,<span class="at">y=</span><span class="st">&quot;&quot;</span>,<span class="at">title=</span><span class="st">&quot;Distribution of successful launches on launch sites&quot;</span>,<span class="at">fill=</span><span class="st">&quot;Launch Site&quot;</span>) <span class="sc">+</span></span>
<span id="cb43-34"><a href="machine-learning-capstone-project.html#cb43-34" aria-hidden="true" tabindex="-1"></a>            <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_blank</span>(),</span>
<span id="cb43-35"><a href="machine-learning-capstone-project.html#cb43-35" aria-hidden="true" tabindex="-1"></a>                  <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb43-36"><a href="machine-learning-capstone-project.html#cb43-36" aria-hidden="true" tabindex="-1"></a>                  <span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span>
<span id="cb43-37"><a href="machine-learning-capstone-project.html#cb43-37" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb43-38"><a href="machine-learning-capstone-project.html#cb43-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-39"><a href="machine-learning-capstone-project.html#cb43-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> </span>
<span id="cb43-40"><a href="machine-learning-capstone-project.html#cb43-40" aria-hidden="true" tabindex="-1"></a>    {     data <span class="sc">%&gt;%</span> </span>
<span id="cb43-41"><a href="machine-learning-capstone-project.html#cb43-41" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(LaunchSite <span class="sc">==</span> <span class="fu">site_select</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb43-42"><a href="machine-learning-capstone-project.html#cb43-42" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(Class) <span class="sc">%&gt;%</span> </span>
<span id="cb43-43"><a href="machine-learning-capstone-project.html#cb43-43" aria-hidden="true" tabindex="-1"></a>              <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>,<span class="at">y=</span><span class="fu">sum</span>(Class),<span class="at">fill=</span><span class="fu">factor</span>(Class))) <span class="sc">+</span></span>
<span id="cb43-44"><a href="machine-learning-capstone-project.html#cb43-44" aria-hidden="true" tabindex="-1"></a>              <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb43-45"><a href="machine-learning-capstone-project.html#cb43-45" aria-hidden="true" tabindex="-1"></a>              <span class="fu">coord_polar</span>(<span class="at">theta=</span><span class="st">&quot;y&quot;</span>,<span class="at">start=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb43-46"><a href="machine-learning-capstone-project.html#cb43-46" aria-hidden="true" tabindex="-1"></a>              <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>,<span class="at">y=</span><span class="st">&quot;&quot;</span>,<span class="at">title=</span><span class="fu">glue</span>(<span class="st">&quot;Distribution og successful and unsuccessful launches at {site_select()}&quot;</span>)) <span class="sc">+</span></span>
<span id="cb43-47"><a href="machine-learning-capstone-project.html#cb43-47" aria-hidden="true" tabindex="-1"></a>              <span class="fu">scale_fill_discrete</span>(<span class="st">&quot;Outcome&quot;</span>,<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Failure&quot;</span>,<span class="st">&quot;Success&quot;</span>)) <span class="sc">+</span></span>
<span id="cb43-48"><a href="machine-learning-capstone-project.html#cb43-48" aria-hidden="true" tabindex="-1"></a>              <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_blank</span>(),</span>
<span id="cb43-49"><a href="machine-learning-capstone-project.html#cb43-49" aria-hidden="true" tabindex="-1"></a>                    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb43-50"><a href="machine-learning-capstone-project.html#cb43-50" aria-hidden="true" tabindex="-1"></a>                    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span>
<span id="cb43-51"><a href="machine-learning-capstone-project.html#cb43-51" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb43-52"><a href="machine-learning-capstone-project.html#cb43-52" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb43-53"><a href="machine-learning-capstone-project.html#cb43-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-54"><a href="machine-learning-capstone-project.html#cb43-54" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>scatterchart <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb43-55"><a href="machine-learning-capstone-project.html#cb43-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">site_select</span>() <span class="sc">==</span> <span class="st">&#39;All&#39;</span>)</span>
<span id="cb43-56"><a href="machine-learning-capstone-project.html#cb43-56" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb43-57"><a href="machine-learning-capstone-project.html#cb43-57" aria-hidden="true" tabindex="-1"></a>      data <span class="sc">%&gt;%</span> </span>
<span id="cb43-58"><a href="machine-learning-capstone-project.html#cb43-58" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(PayloadMass <span class="sc">&gt;=</span> <span class="fu">min_payload</span>(),PayloadMass <span class="sc">&lt;=</span> <span class="fu">max_payload</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb43-59"><a href="machine-learning-capstone-project.html#cb43-59" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>PayloadMass,<span class="at">y=</span>Class,<span class="at">color=</span>LaunchSite)) <span class="sc">+</span></span>
<span id="cb43-60"><a href="machine-learning-capstone-project.html#cb43-60" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb43-61"><a href="machine-learning-capstone-project.html#cb43-61" aria-hidden="true" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Payload Mass (kg)&quot;</span>,<span class="at">y=</span><span class="st">&quot;Outcome Class&quot;</span>,<span class="at">title=</span><span class="st">&quot;Outcome Class vs. Payload Mass (kg) for all launch sites&quot;</span>)</span>
<span id="cb43-62"><a href="machine-learning-capstone-project.html#cb43-62" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb43-63"><a href="machine-learning-capstone-project.html#cb43-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb43-64"><a href="machine-learning-capstone-project.html#cb43-64" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb43-65"><a href="machine-learning-capstone-project.html#cb43-65" aria-hidden="true" tabindex="-1"></a>      data <span class="sc">%&gt;%</span> </span>
<span id="cb43-66"><a href="machine-learning-capstone-project.html#cb43-66" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(LaunchSite <span class="sc">==</span> <span class="fu">site_select</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb43-67"><a href="machine-learning-capstone-project.html#cb43-67" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(PayloadMass <span class="sc">&gt;=</span> <span class="fu">min_payload</span>(),PayloadMass <span class="sc">&lt;=</span> <span class="fu">max_payload</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb43-68"><a href="machine-learning-capstone-project.html#cb43-68" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>PayloadMass,<span class="at">y=</span>Class,<span class="at">color=</span>LaunchSite)) <span class="sc">+</span></span>
<span id="cb43-69"><a href="machine-learning-capstone-project.html#cb43-69" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb43-70"><a href="machine-learning-capstone-project.html#cb43-70" aria-hidden="true" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Payload Mass (kg)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Outcome Class&quot;</span>,<span class="at">title=</span><span class="fu">glue</span>(<span class="st">&quot;Outcome Class vs. Payload Mass (kg) for {site_select()}&quot;</span>))</span>
<span id="cb43-71"><a href="machine-learning-capstone-project.html#cb43-71" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb43-72"><a href="machine-learning-capstone-project.html#cb43-72" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb43-73"><a href="machine-learning-capstone-project.html#cb43-73" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-74"><a href="machine-learning-capstone-project.html#cb43-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-75"><a href="machine-learning-capstone-project.html#cb43-75" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="machine-learning-capstone-project.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">include_app</span>(<span class="st">&quot;https://bjarnelp.shinyapps.io/capstoneproject/&quot;</span>, <span class="at">height=</span><span class="st">&quot;500px&quot;</span>)</span></code></pre></div>
<iframe src="https://bjarnelp.shinyapps.io/capstoneproject/?showcase=0" width="672" height="500px" data-external="1">
</iframe>
</div>
</div>
<div id="machine-learning-models" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Machine Learning Models</h2>
<p>Space X advertises Falcon 9 rocket launches on its website with a cost of 62 million dollars; other providers cost upward of 165 million dollars each, much of the savings is because Space X can reuse the first stage. Therefore if we can determine if the first stage will land, we can determine the cost of a launch. This information can be used if an alternate company wants to bid against space X for a rocket launch. In this lab, you will create a machine learning pipeline to predict if the first stage will land given the data from the preceding labs.</p>
<p>In this chapter we will split the data into a training set and a test set and then fit logistic regression, SVM, kNN and decision tree classifiers to the test set. Best parameters will be determined using 10-fold cross validation grid search. Performance of each model is calculated using the test set, visualized using a tile plot of the confusion matrix as well as determined using the F1-score.</p>
<p>For the classication models, the outcome variable must be a factor. Thus we start by converting the Class variable to a factor:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="machine-learning-capstone-project.html#cb45-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="machine-learning-capstone-project.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Class =</span> <span class="fu">as_factor</span>(Class))</span></code></pre></div>
<p>First we will create a 80/20 training/test split using random sampling:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="machine-learning-capstone-project.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb46-2"><a href="machine-learning-capstone-project.html#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="machine-learning-capstone-project.html#cb46-3" aria-hidden="true" tabindex="-1"></a>data_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(data, <span class="at">prop=</span><span class="fl">0.8</span>)</span>
<span id="cb46-4"><a href="machine-learning-capstone-project.html#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="machine-learning-capstone-project.html#cb46-5" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> <span class="fu">training</span>(data_split)</span>
<span id="cb46-6"><a href="machine-learning-capstone-project.html#cb46-6" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">testing</span>(data_split)</span></code></pre></div>
<p>To facilitate 10-fold cross validation, we set up the folds:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="machine-learning-capstone-project.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">222</span>)</span>
<span id="cb47-2"><a href="machine-learning-capstone-project.html#cb47-2" aria-hidden="true" tabindex="-1"></a>cv_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(train_data,<span class="at">v=</span><span class="dv">5</span>)</span></code></pre></div>
<p>Next we will make a preprocessing and formula recipe, where Flightnumber, Date, Serial, Longitude and Latitude are retained as ID variables. Factors are one-hot-encoded and numeric variables are normalized to have mean 0 and standard deviation 1:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="machine-learning-capstone-project.html#cb48-1" aria-hidden="true" tabindex="-1"></a>spacex_rec <span class="ot">&lt;-</span> </span>
<span id="cb48-2"><a href="machine-learning-capstone-project.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Class <span class="sc">~</span>., <span class="at">data=</span>train_data) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="machine-learning-capstone-project.html#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_role</span>(BoosterVersion,Outcome,FlightNumber,Date,Serial, Longitude,Latitude, <span class="at">new_role=</span><span class="st">&quot;ID&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-4"><a href="machine-learning-capstone-project.html#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb48-5"><a href="machine-learning-capstone-project.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal_predictors</span>()) </span></code></pre></div>
<div id="logistic-regression" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Logistic regression</h3>
<p>We initialize a logistic regression object using glmnet as engine. The penalty and mixture (L1 vs. L2 penalty) are set up as tunable parameters:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="machine-learning-capstone-project.html#cb49-1" aria-hidden="true" tabindex="-1"></a>logit_reg <span class="ot">&lt;-</span> </span>
<span id="cb49-2"><a href="machine-learning-capstone-project.html#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">logistic_reg</span>(<span class="at">penalty=</span><span class="fu">tune</span>(),<span class="at">mixture=</span><span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="machine-learning-capstone-project.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">&quot;glmnet&quot;</span>)</span></code></pre></div>
<p>Next we set up the grid for the grid search. We use five levels of penalty and two leves of mixture (0 and 1):</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="machine-learning-capstone-project.html#cb50-1" aria-hidden="true" tabindex="-1"></a>logit_grid <span class="ot">&lt;-</span></span>
<span id="cb50-2"><a href="machine-learning-capstone-project.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grid_regular</span>(<span class="fu">penalty</span>(),<span class="fu">mixture</span>(),<span class="at">levels=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">2</span>))</span></code></pre></div>
<p>Finally we set up a workflow using the model and the recipe:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="machine-learning-capstone-project.html#cb51-1" aria-hidden="true" tabindex="-1"></a>logit_wf <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="machine-learning-capstone-project.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(logit_reg) <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="machine-learning-capstone-project.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(spacex_rec)</span></code></pre></div>
<p>Now let us do the tuning:</p>
<p>Now let us have a look at the results</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="machine-learning-capstone-project.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(logit_res)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_logit_res-1.png" width="672" />
It seems that in general Lasso regression is better than Ridge regression and that regulization should be between 0.001 and 0.01.</p>
<p>We can now perform the final fit on the train data and evaluate using the test data:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="machine-learning-capstone-project.html#cb53-1" aria-hidden="true" tabindex="-1"></a>logit_best <span class="ot">&lt;-</span> logit_res <span class="sc">%&gt;%</span> <span class="fu">select_best</span>(<span class="st">&quot;accuracy&quot;</span>)</span>
<span id="cb53-2"><a href="machine-learning-capstone-project.html#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="machine-learning-capstone-project.html#cb53-3" aria-hidden="true" tabindex="-1"></a>logit_final_wf <span class="ot">&lt;-</span> logit_wf <span class="sc">%&gt;%</span> <span class="fu">finalize_workflow</span>(logit_best)</span>
<span id="cb53-4"><a href="machine-learning-capstone-project.html#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="machine-learning-capstone-project.html#cb53-5" aria-hidden="true" tabindex="-1"></a>logit_final <span class="ot">&lt;-</span> logit_final_wf <span class="sc">%&gt;%</span> <span class="fu">last_fit</span>(data_split)</span></code></pre></div>
<p>First let us retrieve the predictions and have a look at the confusion matrix</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="machine-learning-capstone-project.html#cb54-1" aria-hidden="true" tabindex="-1"></a>logit_cm <span class="ot">&lt;-</span> logit_final <span class="sc">%&gt;%</span> <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="machine-learning-capstone-project.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(.pred_class,Class)</span>
<span id="cb54-3"><a href="machine-learning-capstone-project.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">autoplot</span>(logit_cm, <span class="at">type=</span><span class="st">&quot;heatmap&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_logit_conf_matrix-1.png" width="672" /></p>
<p>For the logistic regression we get a F1-score of 0.846.</p>
</div>
<div id="support-vector-machines-svm" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Support Vector Machines (SVM)</h3>
<p>We can recycle the recipe from logistic regression, and thus we begin be instantiate the SVM model:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="machine-learning-capstone-project.html#cb55-1" aria-hidden="true" tabindex="-1"></a>svm_lin <span class="ot">&lt;-</span> <span class="fu">svm_linear</span>(<span class="at">cost=</span><span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="machine-learning-capstone-project.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">&quot;classification&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="machine-learning-capstone-project.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">&quot;kernlab&quot;</span>, <span class="at">scaled=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>Next we set up the grid for the grid search. We use three levels of cost and two levels of margin:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="machine-learning-capstone-project.html#cb56-1" aria-hidden="true" tabindex="-1"></a>svm_lin_grid <span class="ot">&lt;-</span></span>
<span id="cb56-2"><a href="machine-learning-capstone-project.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grid_regular</span>(<span class="fu">cost</span>(),<span class="at">levels=</span><span class="dv">5</span>)</span></code></pre></div>
<p>Finally we set up a workflow using the model and the recipe and do the tuning:</p>
<p>Now let us have a look at the results</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="machine-learning-capstone-project.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(svm_lin_res)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_svm_lin-1.png" width="672" />
We find that a cost of 32.0 gives the best accuracy, and we can now perform the final fit on the train data and evaluate using the test data:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="machine-learning-capstone-project.html#cb58-1" aria-hidden="true" tabindex="-1"></a>svm_lin_best <span class="ot">&lt;-</span> svm_lin_res <span class="sc">%&gt;%</span> <span class="fu">select_best</span>(<span class="st">&quot;accuracy&quot;</span>)</span>
<span id="cb58-2"><a href="machine-learning-capstone-project.html#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="machine-learning-capstone-project.html#cb58-3" aria-hidden="true" tabindex="-1"></a>svm_lin_final_wf <span class="ot">&lt;-</span> svm_lin_wf <span class="sc">%&gt;%</span> <span class="fu">finalize_workflow</span>(svm_lin_best)</span>
<span id="cb58-4"><a href="machine-learning-capstone-project.html#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="machine-learning-capstone-project.html#cb58-5" aria-hidden="true" tabindex="-1"></a>svm_lin_final <span class="ot">&lt;-</span> svm_lin_final_wf <span class="sc">%&gt;%</span> <span class="fu">last_fit</span>(data_split)</span></code></pre></div>
<p>Finally let us retrieve the predictions and have a look at the confusion matrix</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="machine-learning-capstone-project.html#cb59-1" aria-hidden="true" tabindex="-1"></a>svm_lin_cm <span class="ot">&lt;-</span> svm_lin_final <span class="sc">%&gt;%</span> <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="machine-learning-capstone-project.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(.pred_class,Class)</span>
<span id="cb59-3"><a href="machine-learning-capstone-project.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">autoplot</span>(svm_lin_cm, <span class="at">type=</span><span class="st">&quot;heatmap&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_svm_lin_conf_mat-1.png" width="672" /></p>
<p>We find a F1-score of 0.741, which is significantly lower than for the logistic regression model.</p>
<p>We now repeat the process for polynomial af radial basis kernels with the exception that the polynomial kernel introduces a new tunable parameter for the polynomial degree and the radial basis kernel introduces the tunable sigma parameter.</p>
<p>Let us have a look at the results for the polynomial kernel:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="machine-learning-capstone-project.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(svm_pol_res)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_svm_pol_res-1.png" width="672" />
We see that a linear kernel performs best, so we will not deal anymore with the polynomial kernel.</p>
<p>For the radial basis kernel:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="machine-learning-capstone-project.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(svm_radial_res)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_svm_radial_res-1.png" width="672" /></p>
<p>We find that a gives the best accuracy, and we can now perform the final fit on the train data and evaluate using the test data:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="machine-learning-capstone-project.html#cb62-1" aria-hidden="true" tabindex="-1"></a>svm_radial_best <span class="ot">&lt;-</span> svm_radial_res <span class="sc">%&gt;%</span> <span class="fu">select_best</span>(<span class="st">&quot;accuracy&quot;</span>)</span>
<span id="cb62-2"><a href="machine-learning-capstone-project.html#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="machine-learning-capstone-project.html#cb62-3" aria-hidden="true" tabindex="-1"></a>svm_radial_final_wf <span class="ot">&lt;-</span> svm_radial_wf <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="machine-learning-capstone-project.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(svm_radial_best)</span>
<span id="cb62-5"><a href="machine-learning-capstone-project.html#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="machine-learning-capstone-project.html#cb62-6" aria-hidden="true" tabindex="-1"></a>svm_radial_final <span class="ot">&lt;-</span> svm_radial_final_wf <span class="sc">%&gt;%</span> <span class="fu">last_fit</span>(data_split)</span></code></pre></div>
<p>Finally let us retrieve the predictions and have a look at the confusion matrix</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="machine-learning-capstone-project.html#cb63-1" aria-hidden="true" tabindex="-1"></a>svm_radial_cm <span class="ot">&lt;-</span> svm_radial_final <span class="sc">%&gt;%</span> <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="machine-learning-capstone-project.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(.pred_class,Class)</span>
<span id="cb63-3"><a href="machine-learning-capstone-project.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">autoplot</span>(svm_radial_cm, <span class="at">type=</span><span class="st">&quot;heatmap&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_svm_radial_conf_mat-1.png" width="672" />
The F1-score for the radial basis function kernel is 0.815, which is better than for the linear kernel but less than for the logistic regression.</p>
</div>
<div id="knn-classifier" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> kNN classifier</h3>
<p>We can recycle the recipe from earlier, and thus we begin be instantiate the kNN model:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="machine-learning-capstone-project.html#cb64-1" aria-hidden="true" tabindex="-1"></a>knn_mod <span class="ot">&lt;-</span> <span class="fu">nearest_neighbor</span>(<span class="at">neighbors=</span> <span class="fu">tune</span>(), <span class="at">weight_func=</span><span class="fu">tune</span>(), <span class="at">dist_power =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="machine-learning-capstone-project.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">&quot;classification&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="machine-learning-capstone-project.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">&quot;kknn&quot;</span>)</span></code></pre></div>
<p>Next we set up the grid for the grid search. We use three levels of cost and two levels of margin:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="machine-learning-capstone-project.html#cb65-1" aria-hidden="true" tabindex="-1"></a>knn_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(<span class="fu">neighbors</span>(),<span class="fu">weight_func</span>(),<span class="fu">dist_power</span>(),<span class="at">levels=</span><span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">9</span>,<span class="dv">4</span>))</span></code></pre></div>
<p>Finally we set up a workflow using the model and the recipe and do the tuning:</p>
<p>Now let us have a look at the results</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="machine-learning-capstone-project.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(knn_res)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_knn_res-1.png" width="672" />
Based on accuracy it seems the best choise would be N=5, rectangular weight function and L1-distance.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="machine-learning-capstone-project.html#cb67-1" aria-hidden="true" tabindex="-1"></a>knn_best <span class="ot">&lt;-</span> knn_res <span class="sc">%&gt;%</span> <span class="fu">select_best</span>(<span class="st">&quot;accuracy&quot;</span>)</span>
<span id="cb67-2"><a href="machine-learning-capstone-project.html#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="machine-learning-capstone-project.html#cb67-3" aria-hidden="true" tabindex="-1"></a>knn_final_wf <span class="ot">&lt;-</span> knn_wf <span class="sc">%&gt;%</span></span>
<span id="cb67-4"><a href="machine-learning-capstone-project.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(knn_best)</span>
<span id="cb67-5"><a href="machine-learning-capstone-project.html#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="machine-learning-capstone-project.html#cb67-6" aria-hidden="true" tabindex="-1"></a>knn_final <span class="ot">&lt;-</span> knn_final_wf <span class="sc">%&gt;%</span> <span class="fu">last_fit</span>(data_split)</span></code></pre></div>
<p>Finally let us retrieve the predictions and have a look at the confusion matrix</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="machine-learning-capstone-project.html#cb68-1" aria-hidden="true" tabindex="-1"></a>knn_cm <span class="ot">&lt;-</span> knn_final <span class="sc">%&gt;%</span> <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb68-2"><a href="machine-learning-capstone-project.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(.pred_class,Class)</span>
<span id="cb68-3"><a href="machine-learning-capstone-project.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">autoplot</span>(knn_cm, <span class="at">type=</span><span class="st">&quot;heatmap&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_knn_conf_mat-1.png" width="672" />
We get a F1-score of 0,846 on par with the logistic regression model.</p>
</div>
<div id="decision-tree-classifier" class="section level3" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Decision tree classifier</h3>
<p>For the decision tree classifier we will reuse the recipe from earlier, though we don’t need to encode factors and standardize numerical features for this model. Let’s start by instatiating the model:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="machine-learning-capstone-project.html#cb69-1" aria-hidden="true" tabindex="-1"></a>tree <span class="ot">&lt;-</span> <span class="fu">decision_tree</span>(<span class="at">tree_depth =</span> <span class="fu">tune</span>(), <span class="at">min_n =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="machine-learning-capstone-project.html#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">&quot;classification&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb69-3"><a href="machine-learning-capstone-project.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">&quot;rpart&quot;</span>)</span></code></pre></div>
<p>Next we set up the grid for the grid search. We use three levels of cost and two levels of margin:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="machine-learning-capstone-project.html#cb70-1" aria-hidden="true" tabindex="-1"></a>tree_grid <span class="ot">&lt;-</span></span>
<span id="cb70-2"><a href="machine-learning-capstone-project.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grid_regular</span>(<span class="fu">min_n</span>(),<span class="fu">tree_depth</span>(),<span class="at">levels=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">10</span>))</span></code></pre></div>
<p>Finally we set up a workflow using the model and the recipe and do the tuning:</p>
<p>Now let us have a look at the results</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="machine-learning-capstone-project.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(tree_res)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_tree_res-1.png" width="672" /></p>
<p>It seems that we get the best decision tree with a rather small tree and a rather big minimal node size. Let us construct the best tree and evaluate the performance:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="machine-learning-capstone-project.html#cb72-1" aria-hidden="true" tabindex="-1"></a>tree_best <span class="ot">&lt;-</span> tree_res <span class="sc">%&gt;%</span> <span class="fu">select_best</span>(<span class="st">&quot;accuracy&quot;</span>)</span>
<span id="cb72-2"><a href="machine-learning-capstone-project.html#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="machine-learning-capstone-project.html#cb72-3" aria-hidden="true" tabindex="-1"></a>tree_final_wf <span class="ot">&lt;-</span> tree_wf <span class="sc">%&gt;%</span></span>
<span id="cb72-4"><a href="machine-learning-capstone-project.html#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(tree_best)</span>
<span id="cb72-5"><a href="machine-learning-capstone-project.html#cb72-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-6"><a href="machine-learning-capstone-project.html#cb72-6" aria-hidden="true" tabindex="-1"></a>tree_final <span class="ot">&lt;-</span> tree_final_wf <span class="sc">%&gt;%</span> <span class="fu">last_fit</span>(data_split)</span></code></pre></div>
<p>Finally let us retrieve the predictions and have a look at the confusion matrix</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="machine-learning-capstone-project.html#cb73-1" aria-hidden="true" tabindex="-1"></a>tree_cm <span class="ot">&lt;-</span> tree_final <span class="sc">%&gt;%</span> <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb73-2"><a href="machine-learning-capstone-project.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(.pred_class,Class)</span>
<span id="cb73-3"><a href="machine-learning-capstone-project.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">autoplot</span>(tree_cm, <span class="at">type=</span><span class="st">&quot;heatmap&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_tree_conf_mat-1.png" width="672" /></p>
<p>With an F1-score of 0,833, it performs slightly worse than the logistic regression and SVM.</p>
<p>As noted in the beginning, the decision tree classifier doesn’t need as much preprocessing as some of the other classifiers. So let’s end this chapter with a decision tree based on less preprocessing.</p>
<p>First let us define a new recipe:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="machine-learning-capstone-project.html#cb74-1" aria-hidden="true" tabindex="-1"></a>tree_rec <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Class <span class="sc">~</span>., <span class="at">data=</span>train_data) <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="machine-learning-capstone-project.html#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_role</span>(BoosterVersion,Outcome,FlightNumber,Date,Serial, Longitude,Latitude, <span class="at">new_role=</span><span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<p>Next we define a new workflow based on the new recipe:</p>
<p>Now let us have a look at the results to decide best parameters:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="machine-learning-capstone-project.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(tree_res2)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_tree_new_res-1.png" width="672" /></p>
<p>Agin, it seems that we get the best decision tree with a rather small tree and a rather big minimal node size. Let us construct the best tree and evaluate the performance:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="machine-learning-capstone-project.html#cb76-1" aria-hidden="true" tabindex="-1"></a>tree_best2 <span class="ot">&lt;-</span> tree_res2 <span class="sc">%&gt;%</span> <span class="fu">select_best</span>(<span class="st">&quot;accuracy&quot;</span>)</span>
<span id="cb76-2"><a href="machine-learning-capstone-project.html#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="machine-learning-capstone-project.html#cb76-3" aria-hidden="true" tabindex="-1"></a>tree_final_wf2 <span class="ot">&lt;-</span> tree_wf2 <span class="sc">%&gt;%</span></span>
<span id="cb76-4"><a href="machine-learning-capstone-project.html#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(tree_best2)</span>
<span id="cb76-5"><a href="machine-learning-capstone-project.html#cb76-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-6"><a href="machine-learning-capstone-project.html#cb76-6" aria-hidden="true" tabindex="-1"></a>tree_final2 <span class="ot">&lt;-</span> tree_final_wf2 <span class="sc">%&gt;%</span> <span class="fu">last_fit</span>(data_split)</span></code></pre></div>
<p>Finally let us retrieve the predictions and have a look at the confusion matrix</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="machine-learning-capstone-project.html#cb77-1" aria-hidden="true" tabindex="-1"></a>tree_cm2 <span class="ot">&lt;-</span> tree_final2 <span class="sc">%&gt;%</span> <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb77-2"><a href="machine-learning-capstone-project.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(.pred_class,Class)</span>
<span id="cb77-3"><a href="machine-learning-capstone-project.html#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">autoplot</span>(tree_cm2, <span class="at">type=</span><span class="st">&quot;heatmap&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-4-1.png" width="672" />
We see that we get exactly the same accuracy as we did with the preprocessing.</p>
</div>
<div id="outro" class="section level3" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> Outro</h3>
<p>In this section we have fitted several models to the spaceX dataset. The best model turned out to be
an L2-penalized logistic regression. Let us have a look at the predictors for the model:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="machine-learning-capstone-project.html#cb78-1" aria-hidden="true" tabindex="-1"></a>logit_fitted <span class="ot">&lt;-</span> logit_final_wf <span class="sc">%&gt;%</span> <span class="fu">fit</span>(data)</span>
<span id="cb78-2"><a href="machine-learning-capstone-project.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(logit_fitted) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(estimate <span class="sc">!=</span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 19 × 3
##    term                                 estimate penalty
##    &lt;chr&gt;                                   &lt;dbl&gt;   &lt;dbl&gt;
##  1 (Intercept)                            1.40   0.00316
##  2 PayloadMass                            0.0122 0.00316
##  3 Flights                               -3.37   0.00316
##  4 Reused                                 1.83   0.00316
##  5 Legs                                   3.56   0.00316
##  6 Block                                 -0.596  0.00316
##  7 ReusedCount                            8.73   0.00316
##  8 Orbit_GTO                             -0.438  0.00316
##  9 Orbit_HEO                              1.25   0.00316
## 10 Orbit_ISS                             -0.910  0.00316
## 11 Orbit_LEO                              0.847  0.00316
## 12 Orbit_PO                              -0.253  0.00316
## 13 Orbit_SO                              -1.54   0.00316
## 14 Orbit_VLEO                            -2.42   0.00316
## 15 LaunchSite_KSC.LC.39A                  1.42   0.00316
## 16 LandingPad_X5e9e3032383ecb6bb234e7ca  -0.301  0.00316
## 17 LandingPad_X5e9e3032383ecb761634e7cb  -3.94   0.00316
## 18 LandingPad_X5e9e3033383ecbb9e534e7cc  -0.462  0.00316
## 19 LandingPad_FALSE.                     -0.546  0.00316</code></pre>
<p>We see that the features most important for a successful outcome is if the first stage has been reused, and how many times it has been reused, if legs were used and the use of orbit HEO and LEO and launch site KSC LC-39A. These observations are in general in line with the findings in the EDA section.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="titanic---studies-on-classification.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
